<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4105390296727512"
	crossorigin="anonymous"></script>
	<title>CS61C Review Doc</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
}

.simple-table-header {
	background: rgb(247, 246, 243);
	color: black;
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(145, 145, 142, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(187, 132, 108, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(215, 129, 58, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 148, 51, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(108, 155, 125, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(91, 151, 189, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(167, 130, 195, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(205, 116, 159, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(225, 111, 100, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(145, 145, 142, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(187, 132, 108, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(215, 129, 58, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 148, 51, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(108, 155, 125, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(91, 151, 189, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(167, 130, 195, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(205, 116, 159, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(225, 111, 100, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="0a2e5a44-35fa-4f89-809a-0efcbf400ad6" class="page sans"><header><h1 class="page-title">CS61C Review Doc</h1></header><div class="page-body"><p id="e05b4ab5-884b-4019-9a7f-77c23bafb141" class="">Created by Yunhao Cao (Github@ToiletCommander) in Fall 2021 for UC Berkeley CS61C.</p><blockquote id="b7fe9ed9-00f4-4aff-8e16-774a927b0501" class="">Reference Notice: Material highly and mostly derived from Prof <a href="https://people.eecs.berkeley.edu/~johnw/">Wawrzynek</a> &amp; <a href="https://www1.icsi.berkeley.edu/~nweaver/">Weaver</a>&#x27;s lecture slides, some ideas were borrowed from wikipedia &amp; <a href="http://csillustrated.berkeley.edu/">CS-Illustrated Berkeley</a>.</blockquote><div id="3a2356da-659c-4598-9ae6-e4ccfcea7a44" class="column-list"><div id="8378f802-cee2-47dd-9a47-d955d01c2374" style="width:87.5%" class="column"><p id="4278916d-5b9e-45b3-9b5d-bbb607d868a8" class="">This work is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a></p></div><div id="93c7d952-56dd-46b3-8a27-12c41fd2bfed" style="width:12.500000000000004%" class="column"><figure id="e8b9b312-e307-4e15-8aec-05ea1ef6f178" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/88x31.png"><img style="width:88px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/88x31.png"/></a></figure></div></div><h1 id="cd559ab9-b68e-4718-b5d0-c599e444facc" class="">C and Memory Representation</h1><h2 id="cea9afc7-66ea-4d1e-8708-5f1bc354c910" class="">Number Representation</h2><h3 id="d19dd59e-bf84-4ce1-ab14-bd25403fcf08" class="">Integer</h3><p id="04becf7a-2b4e-4583-9c12-d7fbb849dd22" class="">
</p><p id="e3835e8e-b086-404e-ad38-139004e85e7d" class=""><strong>Convert Number Radices</strong></p><p id="f9039a32-7aef-434f-801c-cd0aa084bfc1" class="">We have number 159 in decimal, how do we convert this into binary?</p><blockquote id="b2562b36-d23f-4de5-a68d-bff904db4de9" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>159</mn><mo>=</mo><mn>0</mn><mo>∗</mo><msup><mn>2</mn><mn>8</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>7</mn></msup><mo>+</mo><mn>0</mn><mo>∗</mo><msup><mn>2</mn><mn>6</mn></msup><mo>+</mo><mn>0</mn><mo>∗</mo><msup><mn>2</mn><mn>5</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>4</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>3</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>0</mn></msup><mo>=</mo><mn>128</mn><mo>+</mo><mn>16</mn><mo>+</mo><mn>8</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">159 = 0*2^8 + 1*2^7 + 0*2^6 + 0*2^5 + 1 * 2^4 + 1*2^3 + 1*2^2 + 1*2^1 + 1*2^0 = 128  + 16 + 8 + 4 + 2 + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">159</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">128</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">16</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span></blockquote><p id="a4881e3e-b4b4-4c58-b5be-70dda5f3130b" class="">Thus 159 in binary is <code>0b010011111</code>, I left the leftmost 0 there to avoid confusion with negative numbers.</p><p id="41648619-b61f-42ad-9f7b-c1fcdcc22afc" class="">Then what is 159 in hexidecimal? I love to view it starting from binary perspective</p><blockquote id="992f69f7-a43f-47d9-8132-608efabaf884" class="">159 = <code>0b1001.1111</code> </blockquote><p id="fbd82ccc-d298-4a84-9b94-99e029a84d1b" class="">You see that I removed the front 0 because each 4 bit corresponds to a hexidecimal character.</p><blockquote id="4f89020a-448d-41f1-9994-6ba8cc77bbdb" class="">159 = <code>0x9F</code> since 0b1001 = 9 in decimal, and 9 in dec. corresponds to 9 in hex, and 0b1111 = 15 in decimal, and 15 corresponds to F in hex.</blockquote><p id="a5f775df-468d-4f8f-8c67-a1b41c17ed6e" class="">
</p><hr id="e219f364-ef28-4bea-9665-71fea8ca4ca3"/><p id="45db9ef6-1a66-4402-a2f2-4d21bbb24ecb" class="">
</p><p id="78e346c1-6b45-4ca7-80ec-c60baaa7285e" class=""><strong>Two&#x27;s Complement</strong></p><p id="fb6868c8-c403-4837-91f4-b5ce5a93b918" class="">It&#x27;s represented by:</p><p id="dcf2c64d-db8c-429d-a14c-d9dfe62c6116" class="">MSB(bit) as a sign bit ⇒ 0 representing positive and 1 representing negative.</p><p id="1b191a20-b3ea-4f16-8042-dcdbe1d466d4" class="">If MSB is 0, then just treat it as unsigned integer</p><p id="8a76f4bb-3a3f-4ed8-a9b9-c5089af2e0bb" class="">If MSB is 1, then the number is <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-(2^{n}-k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span> where k is the rest bit positions interpreted as unsigned integer.</p><p id="04cc0aa5-47a7-4505-8a74-37d5e7ec5a3d" class="">This representation can take values between <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">-2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> to <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(2^{n-1}-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span></p><p id="5e545bd2-7470-4456-a7d8-973dad37a317" class=""><span style="border-bottom:0.05em solid">The -1 on the right bound was to account for existance of 0</span></p><p id="54252c39-d565-4fb8-8523-7d50e4fd07b7" class="">For example, if I have a 16-bit integer, a value of <code>0b1111111111111111</code>(16 of 1)</p><p id="373fb5d1-6ef2-4c37-acd0-c158c8bd2aea" class="">we would interpret it as <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn><mi>b</mi><mn>111111111111111</mn><mo>=</mo><mn>32767</mn></mrow><annotation encoding="application/x-tex">k = 0b111111111111111 = 32767</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord mathnormal">b</span><span class="mord">111111111111111</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">32767</span></span></span></span></span><span>﻿</span></span>, and the value of it being <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mo>=</mo><mo>−</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mn>16</mn></msup><mo>−</mo><mi>k</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mo stretchy="false">(</mo><mn>32768</mn><mo>−</mo><mn>32767</mn><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">val = -(2^{16}-k) = -(32768-32767)=-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">32768</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">32767</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></span><span>﻿</span></span></p><p id="cc4b7d2e-4490-4921-9a22-855f9dd34bae" class="">Easier two ways to convert complex two&#x27;s negative values:</p><ol type="1" id="06c0f2e5-d4f2-4a1a-a5d0-ddcb2706516e" class="numbered-list" start="1"><li>flip the bits first and add 1 to the final result.</li></ol><ol type="1" id="ab057403-d908-44b1-a9fa-8162534d91af" class="numbered-list" start="2"><li>minus the number by 1 first and then flip the bits.</li></ol><p id="795ed325-ba6e-434a-a799-767c3c71d64e" class="">The two methods both work!</p><p id="d5856a95-58ea-4e83-81fa-352c32e87141" class="">
</p><hr id="0b99cf95-118d-451c-95bf-400c50c8b43d"/><p id="986b2fc8-f24d-4aa7-9fc6-22cb9f2d1b0c" class="">
</p><p id="d763ab60-7185-4456-b91a-e846a0659614" class=""><strong>Signed Magnitude</strong></p><p id="a7789d29-108f-4009-ba0d-e971d88dd645" class="">MSB(bit) is a sign bit ⇒ 0 representing positive and 1 representing negative</p><p id="624fd066-691f-4e57-be87-eb69ac483d41" class="">The rest bit positions can be interpreted as unsigned integer representing the magnitude(absolute value).</p><p id="99507ddb-bcc4-4e0d-9460-305698314573" class="">
</p><hr id="4789594f-ae82-425f-9a61-80325629209a"/><p id="7d0d1a86-3f32-4f03-a5ed-0541f74f83a0" class="">
</p><p id="8bd5ea81-540f-4a4c-98f8-e3443633c77b" class=""><strong>Bias</strong></p><p id="9bdd96ac-d063-46cf-b54e-edd7dbfc56fa" class="">Actual value is the binary(unsigned) value plus a fixed bias</p><p id="c034c18a-5050-453c-9825-8024539058a5" class="">bias = -127 ⇒ actual number is bin value with -127 added to it</p><p id="22bd8464-f263-4c9e-aa21-b5fb5ba54203" class=""><code>0b00000000</code> → -127</p><p id="ed46c9d0-ae6e-4e56-a2ce-27b9541215fb" class=""><code>0b11111111</code> → 128</p><p id="5f6481b1-422d-4fdc-8cea-7dc27fb9418f" class="">
</p><h3 id="4827c827-6756-4d0b-9d2d-25965db4742f" class="">Integer Multiplication</h3><p id="31e20a44-3ee3-4e7a-85c5-471284a17b6b" class="">m bits * n bits = m + n bit product</p><figure id="f5d9c17f-8fd6-4ad9-9d2e-f971b875ce22" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled.png"><img style="width:1737px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled.png"/></a></figure><h3 id="44f8fd17-5a04-47bc-a183-faabd868cf67" class="">Integer Division</h3><figure id="7eab06e2-d234-4bc1-8780-3dbf3054a556" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%201.png"><img style="width:1775px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%201.png"/></a></figure><h3 id="a409bc19-0b97-4c05-8388-bd96e02fc0f1" class="">Floating Point</h3><p id="3e5aa3ed-d328-4516-91fa-50ce2a91430f" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">.</mi><mi>b</mi><mi>c</mi><mo>×</mo><msup><mi>r</mi><mi>e</mi></msup></mrow><annotation encoding="application/x-tex">a.bc \times r^{e}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mord">.</span><span class="mord mathnormal">b</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> ⇒ a is called mantissa, the dot is called binary(or decimal, depending on the representation of the number) point, and r is called radix, or base, and e is called exponent</p><p id="cbeaaedf-1d98-4aeb-9fa7-c00d91313a81" class="">for example, <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.01</mn><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1.01 \times 2^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1.01</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> has a mantissa of 1, a radix of 2 and an exponent of -1</p><p id="74de8de7-9f3a-44f8-ade9-a9e2b211eddc" class="">Floating point standard is invented by Prof. Kahan in UC berkeley!</p><p id="bfb47295-5134-4b05-9fdc-d2c25b6c63f3" class="">We have:</p><ol type="1" id="f42a83e8-1c88-466f-b477-27148c3ccdfd" class="numbered-list" start="1"><li>1 bit for sign (0 ⇒ +, 1 ⇒ -)</li></ol><ol type="1" id="72c61164-e0f9-48c0-93d4-f5c778f55c08" class="numbered-list" start="2"><li>e bits for exponent(E) with exponent bias of <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>e</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{e-1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>, so ranges from <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mrow><mi>e</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-(2^{e-1}-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span> to <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>e</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{e-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></li></ol><ol type="1" id="7d202674-913a-4cc5-aaaa-cbb603b41299" class="numbered-list" start="3"><li>(n-e-1) bits for fraction(F)</li></ol><p id="49dcc160-dd4c-4f5c-afff-e4ddd83a5865" class="">Single Precision Standard(32b) ⇒ 1 bit for sign, 8 bits for exponent, 23 bits for significand, exponent bias of -127</p><p id="ca8adf5e-a365-40cc-bcc7-ce30365de2ef" class="">Double Precision Standard(64b) ⇒ 1 bit for sign, 11 bits for exponent, 52 bits for fraction, exponent bias of -1023</p><p id="488ba801-791e-4f4b-a9c4-ec0c354c3068" class="">We will get 1 extra bit of precision because leading 1 is implicit (cuz if the leading mantissa is 0, then we can simply decrement the exponent...)</p><figure id="9c0b37f8-d391-4db1-a0da-8ca3364c3671" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/b144c2df44326230737123e3231e32a.jpg"><img style="width:1928px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/b144c2df44326230737123e3231e32a.jpg"/></a></figure><p id="c5b90b90-6f9c-44cb-afe5-f6ee22169530" class="">Common Formula (for single precision):</p><p id="a973e73d-f139-4f0e-8d43-a6a57c61b113" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>S</mi></msup><mo>×</mo><mn>1.</mn><mi>S</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>n</mi><mi>d</mi><mo>×</mo><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>−</mo><mn>127</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">(-1)^{S} \times 1.Significand \times 2^{(Exponent - 127)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1.</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">ni</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">c</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">127</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></p><p id="a9b4225c-3f0e-4a85-84a0-f193645a80c8" class="">Here we see Exponent is a biased integer representation, while significand is an unsigned integer representation</p><p id="d8d2bd7a-5cc4-4139-8836-f713ef328f74" class="">
</p><p id="c960f6c1-9e40-4f95-9021-26b6a7e084cc" class=""><strong>Special Cases</strong></p><table id="48e3db1c-a354-4c5e-968c-1cdbeed01c43" class="simple-table"><tbody><tr id="5bc55c4a-1963-45bf-aefd-91baae43906d"><td id="Yvoj">S</td><td id="IF&gt;S">Exponent</td><td id="HFpg">Significand</td><td id="RyXw">Description</td></tr><tr id="f26efb4a-8f80-484d-a42c-ad13987ef016"><td id="Yvoj">0</td><td id="IF&gt;S">00000000</td><td id="HFpg">00000000000000000000000</td><td id="RyXw">Positive Zero - the number is too small to represent and either zero or somewhere between 0 and our smallest number</td></tr><tr id="a21fb084-c0e2-4d71-8a9d-0a76adcbf614"><td id="Yvoj">1</td><td id="IF&gt;S">00000000</td><td id="HFpg">00000000000000000000000</td><td id="RyXw">Negative Zero - the number is too small to represent and either zero or somewhere between 0 and our smallest negative number</td></tr><tr id="15382465-1733-4632-9e3e-3528f9856494"><td id="Yvoj">X</td><td id="IF&gt;S">11111111</td><td id="HFpg">00000000000000000000000</td><td id="RyXw">+/- Infinity</td></tr><tr id="62074a83-30c2-4857-aa45-4faf3a907999"><td id="Yvoj">X</td><td id="IF&gt;S">11111111</td><td id="HFpg">None Zero</td><td id="RyXw">NaN</td></tr><tr id="3cb1066c-8ebc-4b65-8ec2-134332721d66"><td id="Yvoj">X</td><td id="IF&gt;S">00000000</td><td id="HFpg">None Zero</td><td id="RyXw">Denorm</td></tr></tbody></table><p id="dfa1546b-eb36-4bf7-a42b-a57ae5d2677e" class=""><strong>NaN?</strong></p><figure id="7f91507c-0ba6-4222-aaab-cf9da3f3db72" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/a27398c6560b5dd78dc1f6f0c796d7a.jpg"><img style="width:2010px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/a27398c6560b5dd78dc1f6f0c796d7a.jpg"/></a></figure><p id="46446c27-71e2-4e2c-bea2-c2f95e5846aa" class="">
</p><p id="0a3266f0-a324-4a22-817f-0ff30570e8f2" class=""><strong>Denorm - Denormalized Numbers</strong></p><p id="3a8122a1-f42a-4b04-a909-e7e032bea49a" class="">All zero in exponent bit positions, nonzero in significand.</p><p id="3ac7aa21-abfa-4afb-9b4e-ea423c021cb7" class="">No implied leading 1, but implicit exponent = <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mrow><mi>e</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-(2^{e-1}-1) + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span> ⇒ -126 in 32b, -1022 in 64b ⇒ so the exponent behavior is really being 000000001 in the exponent bits, but the implicit leading 1 is deleted and replaced by an implicit leading 0.</p><h2 id="58df79b4-f3f3-43a5-8c10-0c0913ff2663" class="">Pointer and Reference</h2><p id="7210209a-361c-4a6a-81d3-fc8f9c09a9d1" class="">
</p><figure id="ad785e78-3c35-43a7-8829-7d19f4987f6e" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/E8DDAC665C46C179A94150D94B9D4B38.png"><img style="width:2155px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/E8DDAC665C46C179A94150D94B9D4B38.png"/></a></figure><pre id="94973910-6c6c-4244-9883-02024a2b46f0" class="code"><code>int *p; //variable p is address of an int
p = &amp;y; //assign address of y to p
z = *p; //assign value at address in p to z</code></pre><p id="8f04dc65-3b22-4a8d-a3a0-0ad5160008a9" class="">addresses are unsigned integer values.</p><h3 id="f6b69123-8f38-477a-995e-ed3247b0e1b5" class="">Managing Heap</h3><ol type="1" id="b4719fc0-9010-44bb-a00e-e21355830572" class="numbered-list" start="1"><li>malloc(size) returns pointer to uninitialized memory</li></ol><ol type="1" id="58e55692-afe6-4e5e-8752-783d75ba6cf9" class="numbered-list" start="2"><li>calloc(size, number) returns pointer to zeroed memory</li></ol><ol type="1" id="abfb8ff9-6fe4-480e-8d5e-45fad3a1dba1" class="numbered-list" start="3"><li>free(pointer) frees allocated memory</li></ol><ol type="1" id="f265a8a9-9e09-4f48-b8eb-092b9d3d6193" class="numbered-list" start="4"><li>realloc(pointer, new_size) returns new pointer to resized memory<ol type="a" id="15a0e9f2-9bc0-4523-b518-e351fca64684" class="numbered-list" start="1"><li>Be careful that the new pointer may be different form the old pointer, so if there are other pointers pointing to the same block of memory, you&#x27;re dead.</li></ol></li></ol><p id="046fa284-13ce-44aa-89cc-a9796c25f93b" class="">
</p><h3 id="ce637c28-7c5f-48de-91ce-5685c03f5543" class="">Memory Address</h3><p id="dfb09d8d-d201-4768-926e-1c00ee984cbd" class="">Each byte has an unsigned integer address</p><p id="b8966b39-09a2-46e5-8452-804a54e996c1" class="">Commonly thin in terms of words, so 32b for a word in 32b architecture, 64b for a word in 64b architecture, a word is big enough to hold an address</p><p id="231ff217-8287-475b-84fb-4f48ca90c3d6" class="">
</p><h2 id="59160030-70fa-4282-a44c-b7d6b698f821" class="">Types</h2><pre id="3eec5038-4903-404f-a1e7-383006007d86" class="code"><code>typedef struct {
	int x; //int memory aligned each 4 bytes
	int y; //int memory aligned each 4 bytes
} Point;
Point p1;
Point *paddr = &amp;p1;
//we can use p1.x or paddr-&gt;x</code></pre><pre id="8e104df2-2d37-47b9-9687-dd83e194135b" class="code"><code>union foo{ //provides enough space for the largest element
	int a;
	char b;
	union foo *c;
}

union foo f;
f.a = 0xDEADB33F; //treat f as an integer and store the value
f.c = &amp;f; //treat f as a pointer and store the address of f itself.</code></pre><p id="bffef71f-9ec3-49cc-9f0b-37d6ae47fdfe" class="">Default alignment rules (32b architecture):<div class="indented"><ol type="1" id="e298a6cb-8854-47f0-b2bb-2714521f6395" class="numbered-list" start="1"><li>char - a byte, no alignment needed</li></ol><ol type="1" id="26352f49-d8f4-4e2a-b71d-c32922c353e5" class="numbered-list" start="2"><li>short - 2 bytes, 1/2 word aligned,</li></ol><ol type="1" id="624e2113-1905-4bb0-a1b1-27c493a1fc9e" class="numbered-list" start="3"><li>int - 4 bytes, word aligned</li></ol><ol type="1" id="b0a19fe2-d5ab-4bb1-b8ef-645fa9dc4aa7" class="numbered-list" start="4"><li>pointers are same size as ints</li></ol></div></p><p id="6a072c4b-f75a-46e5-a35f-b2067eab3fc4" class=""><strong>Arrays</strong></p><pre id="11c2dece-7f29-49c9-a049-c6fe55889e3c" class="code"><code>int ar[2];
int ar[] = {100, 200};
</code></pre><p id="cadfc52d-194b-4bfc-ae24-1b60cded6750" class="">Array variable is simply a &quot;pointer&quot; to the first(0th) element</p><p id="27ccfcc1-3f08-4a18-ad2d-89308f98981e" class="">so ar[0] = *ar, ar[i] = *(ar + i)</p><p id="1b37083b-da47-4a35-813e-f72f10b3635c" class="">
</p><p id="3d3ab71d-ee00-47b5-9a5f-5999f4722a09" class="">Some weird thing:</p><pre id="0b55a146-cf1e-4bc9-b9eb-7abdf52e08ed" class="code"><code>#include &lt;iostream&gt;

int main(int argc, char** args){
    int arr[2];
    std::cout &lt;&lt; arr &lt;&lt; std::endl;
    std::cout &lt;&lt; &amp;arr &lt;&lt; std::endl;
}</code></pre><p id="dfac1d4a-fd0c-4e49-bd9c-7e2ff063deac" class="">gets the same result, so &amp;ar = ar</p><h1 id="d4b90af1-3c76-478a-b899-d1e29c735f15" class="">Computer Structures</h1><blockquote id="4582e121-ce83-4767-8893-1f7b208b9074" class="">Very Important Idea: Abstraction - make components into black boxes instead of knowing exactly how each of them work!</blockquote><p id="fb1f99a8-9a02-4a20-a20e-0aea054f346f" class="">We will focus on <strong>synchronous digital</strong> systems this semester. </p><p id="a8bca95e-fe24-4628-8457-fd0e9c12d510" class=""><strong>Synchronous </strong>means all operations and communications in the system are coordinated by a central clock. Compared to asynchronous system, which requires local coordination between communication of components, our synchronous systems will be much easier to design &amp; debug.</p><p id="8c06f38e-ecaa-4d2e-ae95-52058b2346dd" class=""><strong>Digital </strong>means we will represent all values using &quot;discrete&quot; values.</p><p id="b34e161c-77c0-4e62-8064-a03e4b00a1a4" class="">We use <strong>Binary</strong> in our system because it has good noise immunity, and Moore&#x27;s law is only possible because of binary representation.</p><figure id="e84521f4-a6be-4e2e-8f53-73bcc55f59f8" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/0728B73D-E62B-4563-9A7A-9E9E8BED3FCD.jpeg"><img style="width:1739px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/0728B73D-E62B-4563-9A7A-9E9E8BED3FCD.jpeg"/></a></figure><h2 id="939ee8d5-7b22-4fdd-9dda-24b2e57f0a3f" class="">Binary Signals</h2><p id="2ae4f417-ebfd-45e1-bd67-8bb898cc51a6" class="">Hardware signals are combined using primitive operators to implement the capabilities we need for executing ISA instructions</p><p id="37741292-6157-4266-baf2-c786c3eab5b9" class="">A TT(Truth Table) defines a function ⇒ enumerate each output value for each input combination</p><table id="b2681bd4-99b8-4c28-935f-960dfdf6ef8b" class="simple-table"><tbody><tr id="9a2369c3-aa31-4970-9a26-ab1aed0b92cb"><td id="fwqL">a</td><td id="Ft_s">b</td><td id="RK^O">a op b</td></tr><tr id="99b8dbe1-ad79-45b5-807b-808da2673914"><td id="fwqL">0</td><td id="Ft_s">0</td><td id="RK^O">0</td></tr><tr id="54fd62d6-1828-438c-addd-db55ea74c13e"><td id="fwqL">0</td><td id="Ft_s">1</td><td id="RK^O">0</td></tr><tr id="a969719f-94bd-43ef-ba25-7c46738ecaac"><td id="fwqL">1</td><td id="Ft_s">0</td><td id="RK^O">0</td></tr><tr id="2c0591a5-4f05-447f-8f0d-971ef14b8b7d"><td id="fwqL">1</td><td id="Ft_s">1</td><td id="RK^O">1</td></tr></tbody></table><h3 id="ad0fdcb6-0bd0-4ef8-872f-e9cd1fe35f3e" class="">Bit Operations</h3><p id="499df107-9800-423f-94e8-20dbffda12b2" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⋅</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \cdot b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span></span><span>﻿</span></span> = a AND b</p><p id="7174ffdb-3ade-4666-b6f3-5b65c91e68b0" class="">a + b = a OR b</p><p id="49d36901-23b4-4cd7-8bbd-ed43fdcf4464" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊕</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \oplus b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span></span><span>﻿</span></span> = a XOR b</p><p id="c6e03074-e533-4c7e-978d-d54c3dc2f30d" class="">brackets ⇒ determines calculation priorities</p><p id="81e3dd35-60ee-43d8-bb23-719a9b59fa99" class="">!a or ~a or a with a line above = NOT a</p><figure id="b71bad8b-0d5d-48b4-9475-7e680bd65b00" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%202.png"><img style="width:2173px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%202.png"/></a><figcaption>Some useful laws of boolean algebra, exhausive proof (perfect induction) is a good way to prove these</figcaption></figure><figure id="99256039-c59a-46b1-9da1-01ddf8683df8" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%203.png"><img style="width:1400px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%203.png"/></a><figcaption>All logic gates, reference: <a href="http://www.exclusivearchitecture.com/?page_id=2425">http://www.exclusivearchitecture.com/?page_id=2425</a></figcaption></figure><h2 id="3108c022-e8ff-4431-87a1-0fc377f00260" class="">Registers</h2><p id="0f737260-6b7e-4055-a7e1-efc2a712fc71" class="">cMOS register circuits in common use are &quot;edge-triggered&quot;, meaning they&#x27;ll take action based on the rising or falling edge of the clock. We&#x27;ll assume rising edge for consitency.</p><p id="daf21c8d-48d6-46fe-96d8-7f11d8ab4b54" class="">1-bit register is called &quot;flip-flop&quot;</p><figure id="fe07c66d-a989-4b68-9e5b-c92d0924d1e9" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%204.png"><img style="width:2029px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%204.png"/></a></figure><p id="d817b6da-ad2e-451f-81c7-45f1adb73199" class="">We know that registers &quot;hold on&quot; to d values until change in clk causes register to capture new d value and hold on to that new d value and output it in q.</p><p id="c1d4fddf-cb3a-47b5-a851-b30d012a6f6f" class="">We&#x27;ll define the following properties of register:</p><ol type="1" id="ac363199-f130-4f98-8f32-8dbce4890e32" class="numbered-list" start="1"><li>setup time (<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>τ</mi><mrow><mi>s</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>p</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\tau_{setup}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28055599999999997em;"><span style="top:-2.5500000000000003em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>) - the time that d must have hold stable before the clock edge</li></ol><ol type="1" id="d2928230-c646-43ae-8cb4-12b00a01969a" class="numbered-list" start="2"><li>clock to q time / register output delay(<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>τ</mi><mrow><mi>c</mi><mi>l</mi><mi>k</mi><mo>−</mo><mi>t</mi><mi>o</mi><mo>−</mo><mi>q</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\tau_{clk-to-q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">o</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>) - the delay from clk edge change until output value changes</li></ol><ol type="1" id="3b384882-b106-463b-9e00-300e92c9792a" class="numbered-list" start="3"><li>hold time(<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>τ</mi><mrow><mi>h</mi><mi>o</mi><mi>l</mi><mi>d</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\tau_{hold})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span> - the time that d must hold after the clock edge</li></ol><h2 id="71f2cb39-52fb-4f6f-a796-34ac5c1e4875" class="">Physical Limitations (Of Processors)</h2><h3 id="8e2d0999-9836-4a23-9aa6-b12cca4545c7" class="">For CMOS....</h3><ol type="1" id="e6ef6c0b-04cd-492b-a1d2-124746c6c6a7" class="numbered-list" start="1"><li>They leak when off</li></ol><ol type="1" id="ebdbb47c-e31f-4461-8b87-068bffc76645" class="numbered-list" start="2"><li>They have finite resistance when on</li></ol><ol type="1" id="693021ab-3a4f-4bd1-b238-0cfca2e9347c" class="numbered-list" start="3"><li>All circuit nodes have capacitance, so to change their voltage level we must displace charge first</li></ol><ol type="1" id="7c45a7d2-a158-494d-b522-418499b40460" class="numbered-list" start="4"><li>So for every logic gate, we&#x27;ll have delay from input change to output change</li></ol><figure id="a1909c51-98ae-4258-8023-77f4f25d78c6" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%205.png"><img style="width:1241px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%205.png"/></a></figure><h3 id="b8716437-db49-4302-b079-7f07e269669c" class="">Energy</h3><p id="f3281903-1a80-4057-9edc-7fd8694145e5" class="">To switch on/off every transistor, we see above that it takes energy to do so.</p><p id="75253fcd-07a6-4b6b-a37b-14ad42984c00" class="">We know <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>=</mo><mfrac><mrow><mi>d</mi><mi>E</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">P = {{dE}\over{dt}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span>, and we know for capacitors, <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><mn>0</mn><mo>−</mo><mi>t</mi><mi>o</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>⋅</mo><mi>C</mi><mo>⋅</mo><msubsup><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">E_{0-to-1} = {1\over2} \cdot C \cdot V_{dd}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">o</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.097216em;vertical-align:-0.2831079999999999em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831079999999999em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> and <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><mn>1</mn><mo>−</mo><mi>t</mi><mi>o</mi><mo>−</mo><mn>0</mn></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>⋅</mo><mi>C</mi><mo>⋅</mo><msubsup><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">E_{1-to-0} = {1\over2} \cdot C \cdot V_{dd}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">o</span><span class="mbin mtight">−</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.097216em;vertical-align:-0.2831079999999999em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831079999999999em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></p><p id="d97f7907-c8f7-4a9e-87ac-3293f124f952" class="">So switching power <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>s</mi><mi>w</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>⋅</mo><mi>α</mi><mo>⋅</mo><mi>C</mi><mo>⋅</mo><msubsup><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow><mn>2</mn></msubsup><mo>⋅</mo><mi>F</mi></mrow><annotation encoding="application/x-tex">P_{sw} = {1 \over 2} \cdot \alpha \cdot C \cdot V_{dd}^2 \cdot F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.097216em;vertical-align:-0.2831079999999999em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831079999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span></span><span>﻿</span></span></p><p id="372b2560-efd6-4f98-a4e3-5c556247c3b7" class="">where:</p><p id="b00b86ca-fc34-4232-88cb-2ce73f7719c1" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span><span>﻿</span></span> is the &quot;activity factor&quot;, average percentages of capacitance switching per cycle (~ number of nodes to switch)</p><p id="27df7573-57ea-400b-9384-476596fb9745" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span><span>﻿</span></span> is the total chip capacitance to be switched</p><p id="cafff6f2-6849-4bfa-99d0-232113707e36" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{dd}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> is the operating voltage</p><p id="aa5086a7-2d8d-4a58-9da4-fe06016ff5b1" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span></span><span>﻿</span></span> is the clock frequency</p><p id="20e42a85-b8f2-4f46-91a9-a5bd0af4795d" class="">We can decrease clock frequency to reduce power, but doesn&#x27;t improve energy efficiency because we would have to run longer to finish our computation</p><p id="1c891e99-cf5f-48a6-81ac-3427fedde931" class="">We know <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><mi>s</mi><mi>w</mi></mrow></msub></mrow><annotation encoding="application/x-tex">E_{sw}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> is proportional to <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">V_{dd}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.097216em;vertical-align:-0.2831079999999999em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831079999999999em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>, <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><mi>s</mi><mi>w</mi></mrow></msub><mo>∝</mo><msubsup><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">E_{sw} \propto V_{dd}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.097216em;vertical-align:-0.2831079999999999em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831079999999999em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>.</p><p id="19e1d1eb-4657-4bdc-a16f-0ffbd943af55" class="">but, <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>τ</mi><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>i</mi></mrow></msub><mo>∝</mo><msub><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\tau_{logi} \propto V_{dd}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> (we would charge slower if <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{dd}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> is lowered)</p><p id="bcd014ba-47dd-421c-a34c-3ea6c5d36de5" class="">We can improve energy efficiency by lowering supply voltage and making up for less performance by using parallelism.</p><p id="60c55c4b-1665-47dc-901b-b0477b5a59fd" class="">
</p><p id="71847813-d472-402b-8ad9-0494b4fbbd65" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>g</mi><mi>y</mi></mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi></mrow></mfrac><mo>⋅</mo><mfrac><mrow><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>g</mi><mi>y</mi></mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">{energy \over program} = {instructions \over program} \cdot {energy \over instruction}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.228608em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">am</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3367719999999998em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.855664em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">am</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0925em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span></p><p id="187433e2-3d0c-4670-84cf-fa10382a6910" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>g</mi><mi>y</mi></mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi></mrow></mfrac><mo>∝</mo><mfrac><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi></mrow></mfrac><mo>⋅</mo><mi>C</mi><msubsup><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">{energy \over program} \propto {instructions \over program} \cdot CV_{dd}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.228608em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">am</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3367719999999998em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.855664em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">am</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.097216em;vertical-align:-0.2831079999999999em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831079999999999em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></p><p id="14927238-d867-433f-afcc-03ea779e5c18" class="">Capacitance is dependent on technology, microarchitecture, circuit details,</p><p id="8af27332-93da-4e52-b169-dbb2830e600c" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{dd}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">dd</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> is supply voltage</p><p id="ab61c825-dae7-4892-8f63-e6d705e43ac2" class="">We want to both reduce capacitance and supply voltage to reduce energy per task</p><p id="391a0bda-18f0-4291-abb5-6f2089660af5" class="">Energy efficiency is super important (key metric) in all computing devices because...</p><ol type="1" id="09168d01-1b0f-4dc0-8c9f-e5a055dc0a64" class="numbered-list" start="1"><li>for power-constrained systems (datacenter), need better energy efficiency to get more performance at same power.</li></ol><ol type="1" id="d3186fd2-03b2-4aca-ae84-a19f005cbd23" class="numbered-list" start="2"><li>for energy-constrained systems (phone), need better energy efficiency to prolong battery life.</li></ol><p id="7ebb11f4-fb59-481c-ae5a-dbdbb2a2879b" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>e</mi><mi>r</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>t</mi><mi>a</mi><mi>s</mi><mi>k</mi><mi>s</mi></mrow><mrow><mi>s</mi><mi>e</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>d</mi></mrow></mfrac><mo stretchy="false">)</mo><mo>=</mo><mi>p</mi><mi>o</mi><mi>w</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>J</mi><mi>o</mi><mi>u</mi><mi>l</mi><mi>e</mi><mi>s</mi></mrow><mrow><mi>s</mi><mi>e</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>s</mi></mrow></mfrac><mo stretchy="false">)</mo><mo>⋅</mo><mrow><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>g</mi><mi>y</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>f</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>y</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>t</mi><mi>a</mi><mi>s</mi><mi>k</mi><mi>s</mi></mrow><mrow><mi>J</mi><mi>o</mi><mi>u</mi><mi>l</mi><mi>e</mi></mrow></mfrac><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">Performance({tasks \over second}) = power({Joules \over seconds}) \cdot {energy\_efficiency({tasks \over Joule})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal">man</span><span class="mord mathnormal">ce</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">seco</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">seco</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">es</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal">i</span><span class="mord mathnormal">c</span><span class="mord mathnormal">i</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">cy</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose">)</span></span></span></span></span></span><span>﻿</span></span></p><p id="fc21fba8-1990-4a6e-8280-2d221a48c2a7" class="">Recent years industry hasn&#x27;t been able to reduce supply voltage much, it reducing it further would mean increasing &quot;leakage power&quot; where transistor switches don&#x27;t fully turn off</p><p id="b654c4af-53c1-4244-bf2b-47b53ec6f6b9" class="">Size of transistors and capacitance not shrinking as much as before - we are hitting the &quot;power wall&quot; (功耗墙)</p><h3 id="2074f665-db96-4848-a3c7-7b2b3d5036ec" class="">Performance</h3><ol type="1" id="1d13fe0e-d0f5-4763-9161-95447356a53a" class="numbered-list" start="1"><li>Latency(延迟) - execution time for each instruction</li></ol><ol type="1" id="1792cc21-5246-4cdf-acde-56979885f080" class="numbered-list" start="2"><li>Throughput(吞吐量) - total number of instructios executed per unit time</li></ol><ol type="1" id="ab5ad128-965b-4f79-8bf0-39d2b8c477a0" class="numbered-list" start="3"><li>Energy Efficiency(能效) - Energy per instruction</li></ol><p id="85e06da9-bd0b-43cd-9dc9-189d821d5c55" class="">
</p><p id="c2a762cf-bb93-4849-bccc-5699dc7fb35d" class="">Iron Law of Processor Performance:</p><p id="eba411c4-7dab-495f-adcd-7c606163d286" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi></mrow></mfrac><mo>⋅</mo><mfrac><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi><mi>e</mi><mi>s</mi></mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac><mo>⋅</mo><mfrac><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi><mi>e</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">{time \over program} = {instructions \over program} \cdot {cycles \over instruction} \cdot {time \over cycle}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3367719999999998em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.855664em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">am</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3367719999999998em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.855664em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">am</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.277216em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322159999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">cyc</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">es</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.3367719999999998em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.855664em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">cyc</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span></p><ol type="1" id="62043121-f4ca-45ba-b0a2-b85a5c93726c" class="numbered-list" start="1"><li><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">{instructions \over program}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3367719999999998em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.855664em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">am</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span> is determined by<ol type="a" id="445845e5-1aec-4a51-991d-2ec19760e309" class="numbered-list" start="1"><li>task specification</li></ol><ol type="a" id="d8cc3ff6-5e64-4b1e-a91d-3615c5785e63" class="numbered-list" start="2"><li>algorithm (e.g. <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span> vs. <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span>)</li></ol><ol type="a" id="336d250c-44f7-49a6-b793-155f13d72ee9" class="numbered-list" start="3"><li>Programming Language</li></ol><ol type="a" id="f66530a1-2291-4710-85d4-2fc851ef2238" class="numbered-list" start="4"><li>Compiler</li></ol><ol type="a" id="dd615419-06c2-4795-9765-38f58458ff89" class="numbered-list" start="5"><li>Instruction Set Architecture(ISA)</li></ol></li></ol><ol type="1" id="5be5cccc-9191-4931-b282-0e67ae9df662" class="numbered-list" start="2"><li><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi><mi>e</mi><mi>s</mi></mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">{cycles \over instruction}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.277216em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322159999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">cyc</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">es</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span> is determined by<ol type="a" id="606bb6a8-b3f9-4a4b-82c1-9842d26a79f9" class="numbered-list" start="1"><li>ISA</li></ol><ol type="a" id="678e4e80-1934-44f2-910f-4b0067b294e9" class="numbered-list" start="2"><li>Processor Implemention (or microarchitecture)<ol type="i" id="fedc1cd4-f757-4e81-9a91-b3c68f236435" class="numbered-list" start="1"><li>CPI (Clock Per Instruction)<ol type="1" id="3f65f2c6-fc31-4836-a34f-c50f8de32e26" class="numbered-list" start="1"><li>Pipelined Processors, CPI &gt; 1</li></ol><ol type="1" id="21b92747-09af-4190-944e-cb99f45e280f" class="numbered-list" start="2"><li>Superscalar Processors, CPI &lt; 1</li></ol></li></ol></li></ol></li></ol><ol type="1" id="ee02a8ad-6e03-4ee4-925a-83e967e34c2d" class="numbered-list" start="3"><li><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi><mi>e</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">{time \over cycle}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3367719999999998em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.855664em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">cyc</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span> is determined by<ol type="a" id="6e8d6194-794f-4538-855d-b5e6f7e4de31" class="numbered-list" start="1"><li>processor microarchitecture</li></ol><ol type="a" id="a79b90c2-f12a-46e9-9697-e32faf1f79f6" class="numbered-list" start="2"><li>technology (5nm vs. 14nm)</li></ol><ol type="a" id="f1ede36b-1c51-404c-bae4-7932e887ee6d" class="numbered-list" start="3"><li>spply voltage (lower voltage reduces transistor speed, but improves energy efficiency)</li></ol></li></ol><h2 id="ba6c9ba2-5bb3-4c9a-ba75-44467ff1cf4c" class="">Pipelining 指令管线化</h2><p id="435bbaf1-a97c-414c-b06f-f3825e91a6cb" class="">It increases throughput(by overlapping execution of multiple instructions) but can never improve latency</p><figure id="e8fb16eb-3b0a-46f9-a5d1-b6bd6b882632" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%206.png"><img style="width:1366px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%206.png"/></a></figure><figure id="574e4058-b520-4367-805a-23af878f65c6" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%207.png"><img style="width:1366px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%207.png"/></a></figure><p id="ba6f5bce-8bd4-4356-878e-48d9ce0576db" class="">But we will eventually run into hazards</p><ol type="1" id="c1a867f8-2122-4903-95f7-531c108d205d" class="numbered-list" start="1"><li>Structural Hazard<ol type="a" id="3ad26bc6-fadc-416a-a544-a6dddc3874c3" class="numbered-list" start="1"><li>Two or more instructions in the pipeline compete for the same physical resource</li></ol><ol type="a" id="99c714df-c6b6-40f8-9ce0-d6650c66e070" class="numbered-list" start="2"><li>Solved by either<ol type="i" id="17f63368-4018-42b1-8b22-f41067734006" class="numbered-list" start="1"><li>Instructions take turns to use resource (which means some instructions have to stall)</li></ol><ol type="i" id="6beebd79-3d04-4e0a-b789-52061d61269e" class="numbered-list" start="2"><li>Add more hardware (Yeah, I have money!)</li></ol></li></ol><ol type="a" id="f6528296-575c-499a-8842-409f4f28ae78" class="numbered-list" start="3"><li>e.g. Regfile Structural Hazard<ol type="i" id="871367d2-bf3c-4623-b3f6-118f010ad415" class="numbered-list" start="1"><li>each instruction can read up to two operands in decode stage and write one value in writeback stage</li></ol><ol type="i" id="d94b75c7-9b98-4ccd-9ce8-27deef90db93" class="numbered-list" start="2"><li>So avoid structural hazard by having two independent read ports and one independent write port</li></ol><ol type="i" id="bdb738f8-47ff-42fe-89b8-069404648cd0" class="numbered-list" start="3"><li>So reads from one instruction and writes from another can happen simultaneously.</li></ol></li></ol><ol type="a" id="d3131a38-bc6b-4ad5-b6a6-26c870283e81" class="numbered-list" start="4"><li>e.g. Memory Access<ol type="i" id="72145cc1-c672-4281-9c58-d2632e11d326" class="numbered-list" start="1"><li>In DM and IM stage, Instruction and Data Memory are used simultaneously</li></ol><ol type="i" id="a24ce13b-6895-4271-9b46-53121cbe8b75" class="numbered-list" start="2"><li>can be solved by using two separate memories, I$ and D$ (Indeed we would use two separate first-level caches)</li></ol></li></ol><ol type="a" id="7f03e1dc-8bf2-42c3-a638-8288e1b0b98b" class="numbered-list" start="5"><li>RISC ISAs are designed to avoid structural hazards<ol type="i" id="a670b7ca-9ae2-4799-b0f4-e1eeb15ed7b0" class="numbered-list" start="1"><li>at most one memory access per instruction</li></ol><ol type="i" id="701518cb-91a2-41c3-80d7-cb18415f63a7" class="numbered-list" start="2"><li>limited operands per instruction</li></ol></li></ol></li></ol><ol type="1" id="9c4a4e32-0c81-4dda-9f0e-59502b15e967" class="numbered-list" start="2"><li>Data Hazard<ol type="a" id="3eb122f3-dff4-4272-a019-2635dedb79d2" class="numbered-list" start="1"><li>Register Access<ol type="i" id="bebfc44b-0924-4691-abc7-4f183061dfb2" class="numbered-list" start="1"><li>We already have separate ports, but what happens if we write to the same value as we read?</li></ol><ol type="i" id="e1cec944-c935-4e30-8abc-7fa53ff0954b" class="numbered-list" start="2"><li>We can exploit high speed of register file (100ps), let WB update value first then ID reads new value ⇒ this is shown by the shading of the pipelining diagram</li></ol><ol type="i" id="60971e0d-c8fe-4b34-a801-8ddf213990da" class="numbered-list" start="3"><li>However, if we&#x27;re working in high-frequency designs, this might not be possible</li></ol></li></ol><ol type="a" id="2da140b0-16d7-4f94-8b49-a4dead0270b3" class="numbered-list" start="2"><li>ALU Result<ol type="i" id="1df38de1-dd6b-409a-b113-c265ee5c629e" class="numbered-list" start="1"><li>Say we add 1 to t0 in first instruction, and add 2 to t0 in second instruction<ol type="1" id="3d12a9bc-3952-4886-a4b2-ed0a61823aba" class="numbered-list" start="1"><li>However, the value of t0 after first instruction would not have been written back by the first instruction until we reach the 5th cycle (when WB stage of the first instruction is finally active)</li></ol><ol type="1" id="575c6cf4-208b-483b-a36c-ca348bff09c4" class="numbered-list" start="2"><li>So basically the second instruction is reading wrong register values when it reaches its register read stage</li></ol></li></ol><ol type="i" id="d15c2c68-43c2-415e-9f31-b8115183cd46" class="numbered-list" start="2"><li>We can <strong>stall the instruction</strong> but it reduces performance</li></ol><ol type="i" id="d8cd248c-c959-4037-b268-e19b387de12d" class="numbered-list" start="3"><li>Or the <strong>compiler can try to arrange code</strong> to avoid hazards and stalls, but requires knowledge of the pipeline structure</li></ol><ol type="i" id="2921e20a-76e5-4c85-9856-54f307806e54" class="numbered-list" start="4"><li>Or ⇒ We add <strong>Data Forwarding</strong>!<ol type="1" id="7d5e98a5-bf2f-40ca-b98e-ffd821f5f580" class="numbered-list" start="1"><li>ALU result from one pipeline to another</li></ol><ol type="1" id="7b07adaf-42d2-4746-932c-91fe0d467465" class="numbered-list" start="2"><li>This requires modifications in datapath as well as in control logic(See Below)</li></ol></li></ol></li></ol><ol type="a" id="3a2e4fb8-42a6-43df-ab88-e6d1a8891eaf" class="numbered-list" start="3"><li>Load<ol type="i" id="4c245a76-6e32-443a-a5b2-fdfcb4f105eb" class="numbered-list" start="1"><li>There are cases when stalls are unavoidable<ol type="1" id="0d9cadac-7fa8-4105-b3da-8db80b314963" class="numbered-list" start="1"><li>Slot after a load ⇒ <span style="border-bottom:0.05em solid">Load Delay Slot</span></li></ol><ol type="1" id="e996c0f6-9b28-429c-af8b-9ceea805ff06" class="numbered-list" start="2"><li>if use the result of the load in load delay slot, there&#x27;s an unavoidable NOP ⇒ repeat and instruction and forward</li></ol><ol type="1" id="2e417e3d-0ed0-433a-8b0f-576dd953030e" class="numbered-list" start="3"><li>but we can use unrelated instruction into load delay slot ⇒ no performance loss!</li></ol></li></ol></li></ol></li></ol><ol type="1" id="4edc92db-acb7-44c3-9440-c4ba3d6e755e" class="numbered-list" start="3"><li>Control Hazard<ol type="a" id="a9d6a658-8be9-438b-87aa-f96a0f0e87cc" class="numbered-list" start="1"><li>When a branch statement is executed, 3 lines of asm code after branch statement is also loaded into pipeline, and those statements <strong>could be executed regardless of branch outcome</strong> if not turned into NOP.</li></ol><ol type="a" id="54da9e9a-f09d-4685-a6ca-64cb1baacc66" class="numbered-list" start="2"><li>Every taken branch in simple pipleine costs 2 dead cycles</li></ol><ol type="a" id="30e29809-14cf-46ac-8439-224c7db3fc67" class="numbered-list" start="3"><li>So we use <strong>branch prediction(分支预测)</strong> to guess which way branch will go<ol type="i" id="86f7b57a-e198-4fd5-a973-1271755cd1f1" class="numbered-list" start="1"><li>We will keep a branch prediction buffer / cache ⇒ small memory addressed by the lowest bits of PC</li></ol><ol type="i" id="d92b5725-054d-44d4-a2e8-678d16923fa5" class="numbered-list" start="2"><li>During Instruction Decode ⇒ Look up whether branch was taken last time?<ol type="1" id="e8698faa-0870-4915-b2fd-9751426048f6" class="numbered-list" start="1"><li>If yes, compute PC + offset and fetch that</li></ol><ol type="1" id="6c03cece-309b-44d1-9065-545415ee6aae" class="numbered-list" start="2"><li>If no, stick with PC + 4</li></ol><ol type="1" id="c7b6c138-dbea-4477-9738-134bed3e30fe" class="numbered-list" start="3"><li>If branch hasn&#x27;t been seen before<ol type="a" id="62b139cf-ae58-4668-a9ac-a3b0e1b9c148" class="numbered-list" start="1"><li>assume forward branches are not taken, backward branches are taken</li></ol></li></ol></li></ol></li></ol></li></ol><figure id="95cf4e9a-21c3-4fbb-9a9a-66ec6bcd69b7" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3C13574E-BE6D-49C0-9C2D-75F53D372576.jpeg"><img style="width:4999px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3C13574E-BE6D-49C0-9C2D-75F53D372576.jpeg"/></a></figure><figure id="82a0ab49-d54b-4bbb-8af5-25b8f9d26c3a" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/F1AE37A3-31EA-426E-BA1B-2D72E86090F0.jpeg"><img style="width:2732px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/F1AE37A3-31EA-426E-BA1B-2D72E86090F0.jpeg"/></a></figure><p id="91c06a97-ca1f-48d1-81d0-f52139521fe7" class="">
</p><h2 id="78acbcbc-2fce-4c59-ace0-aa8decd89b04" class="">Superscalar Processor 超标量处理器</h2><ol type="1" id="961f04dc-84d6-4990-9448-0da5a53ce915" class="numbered-list" start="1"><li>We have multiple pipeline hardwares per stage<ol type="a" id="7efb4179-7792-42cd-a315-2f56a666a7a3" class="numbered-list" start="1"><li>Multiple execution units for additional instruction level parallelism</li></ol><ol type="a" id="cfef0830-65f4-41f6-91fc-0677509d5769" class="numbered-list" start="2"><li>Performance benefit highly code dependent</li></ol></li></ol><ol type="1" id="0e8a437b-ae6c-4897-9196-f486cb83c9e4" class="numbered-list" start="2"><li>Start multiple instructions per clock cycle</li></ol><ol type="1" id="e5ecc049-a4ab-4a83-89ef-354d9d4bb754" class="numbered-list" start="3"><li>CPI &lt; 1 (think about this, we have multiple datapath hardwares running at same time)</li></ol><ol type="1" id="65900b62-171c-4af4-bb01-cda0cb863468" class="numbered-list" start="4"><li>since CPI &lt; 1, we will use Instructions Per Cycle (IPC)</li></ol><ol type="1" id="1d20cc0d-6629-41dc-821b-1d7f1837da24" class="numbered-list" start="5"><li>Out-of-Order Execution 乱序执行<ol type="a" id="41121116-d311-4fbf-9f1c-4c9dd73a3fc3" class="numbered-list" start="1"><li>Recorder instructions dynamically in hardware to reduce impact of hazards: EG, memory/cache misses.</li></ol></li></ol><figure id="18d385d2-a9ef-4f9d-8da8-5502229d0484" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/E08EF499-0F3C-4307-A2C6-675CF3236855.jpeg"><img style="width:4999px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/E08EF499-0F3C-4307-A2C6-675CF3236855.jpeg"/></a></figure><h2 id="14d5c088-eced-4d92-a2ac-224e4cdedc74" class="">Memory Cache</h2><p id="81cb5e50-d4f3-4f60-b52b-7d0578f88941" class="">Very important to notice that the performance gap between CPU and DRAM, and it is usually impossible to buy RAMs that are BIG and FAST using a little amount of money. The solution is to use cache!</p><figure id="44d8e5a0-34eb-4d5d-b931-f002ce33a330" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A65C6632-326C-49B1-88E5-C2F320F4D776.jpeg"><img style="width:2234px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A65C6632-326C-49B1-88E5-C2F320F4D776.jpeg"/></a></figure><figure id="f258d59d-3128-4803-9dc8-0d6af35e6052" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/DF5AE661-7114-43CC-84B2-7AE02D12EF0D.jpeg"><img style="width:2191px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/DF5AE661-7114-43CC-84B2-7AE02D12EF0D.jpeg"/></a></figure><p id="12358ef8-37d6-48f2-9e96-248cb720646f" class="">Big Idea is to use <strong>Locality 局部性</strong> - The idea that memory access usually happens around the same place in a given period</p><blockquote id="ae5cae0b-712a-4622-93d3-03e4b62e6fe7" class="">Principle of Locality states that programs access small portion of address space at any instant of time (spatial locality) and repeatedly access that portion (temporal locality)</blockquote><p id="ecbaed9e-d53d-43eb-95f1-b61e04667ab4" class="">We have two types of locality</p><ol type="1" id="2717e370-76bf-4a01-a53b-e02a87cd5dbc" class="numbered-list" start="1"><li><strong>Temporal Locality 时间局部性</strong><ol type="a" id="4bec5679-62e7-455a-afa5-e136ede5a237" class="numbered-list" start="1"><li>If memory location is referenced, then it will tend to be referenced again soon</li></ol></li></ol><ol type="1" id="84a52437-3b46-4d69-96e6-ffd9df34a5a1" class="numbered-list" start="2"><li><strong>Spacial Locality 空间局部性</strong><ol type="a" id="fb9b1bbf-ab06-4d37-ae12-f8e99c39f133" class="numbered-list" start="1"><li>If a memory location is referenced, the locations with nearby addresses will tend to be referenced soon</li></ol></li></ol><p id="a8375f2e-9ecb-4cf0-a5ad-11b281027ca7" class="">So cache uses the fact that the program uses memory and exhibits those locality characteristics...</p><p id="e398934e-8a03-452f-bc19-4a513363e9d4" class="">And it...</p><ol type="1" id="742d485e-1427-490d-a302-d5a0d1e04100" class="numbered-list" start="1"><li>Give illusion of speed of fastest memory with size of largest memory</li></ol><ol type="1" id="71645fd9-bb65-4c85-a650-2b4a86b20824" class="numbered-list" start="2"><li>However, if you overwhelm the cache your performance may drop off a cliff.</li></ol><ol type="1" id="b869b453-369b-42bf-923f-1dd6dd4351e0" class="numbered-list" start="3"><li>Now processor instead of going to the memory and ask for data it will go to the cache and ask for data<ol type="a" id="81ff8d61-9bbf-4941-a0ec-f7f78df5d6ce" class="numbered-list" start="1"><li>Processor asks for data in 0x12F0</li></ol><ol type="a" id="25c5d389-2acb-4d6b-b1d7-cdc37102eb0c" class="numbered-list" start="2"><li>cache checks if has copy of data at address 0x12F0<ol type="i" id="c97d556c-fab9-41ec-962c-587db7eba408" class="numbered-list" start="1"><li>If yes, return the data to processor</li></ol></li></ol><ol type="a" id="319bbef7-3869-471c-a25e-b52419997584" class="numbered-list" start="3"><li>If not, cache asks for 0x12F0 from memory and stroes that value in cache</li></ol><ol type="a" id="4e9d9551-f9e5-4e47-b3d7-b96db7d5faae" class="numbered-list" start="4"><li>Then cache returns data to processor.</li></ol></li></ol><hr id="c35d22ba-16f8-4fbc-b85c-c4f1166fff3b"/><p id="43f782df-f84c-4ad5-85ea-9a2bff497757" class="">How Cache uses Processor address:</p><table id="066a6d96-c68f-4b35-955f-f74884b33016" class="simple-table"><tbody><tr id="8178da02-ac4f-4e8e-8c38-5f858266cd02"><td id="hnxK">Tag(MSB - n+o)</td><td id="PfgZ">Set Index(n+o - o)</td><td id="^HDZ">Block offset(o - LSB)</td></tr><tr id="89e9ea85-149a-4a43-b228-10cbb4e83c1b"><td id="hnxK">Remaining Portion of Processor Address</td><td id="PfgZ">Bit length determined by number of sets</td><td id="^HDZ">Byte address within block, bit length determined by block size.</td></tr></tbody></table><p id="7874f272-3808-4462-b834-ff22e08c347b" class="">Organization of sets and blocks:</p><ol type="1" id="f9680584-c201-457b-8fe6-68cecf8c8663" class="numbered-list" start="1"><li>Directly Mapped<ol type="a" id="b30a4b6c-1260-49a3-86d3-318971c9e0cc" class="numbered-list" start="1"><li>Associativity = 1</li></ol><ol type="a" id="c02f00df-e2bb-49ec-9926-d0b772b0c2a9" class="numbered-list" start="2"><li>Set # of Sets = # of Blocks</li></ol><ol type="a" id="422316ea-1b42-40d4-b2de-3801f247d263" class="numbered-list" start="3"><li>Requires only 1 comparator</li></ol></li></ol><ol type="1" id="22c4fba6-689b-43fc-aa0e-30fd00018976" class="numbered-list" start="2"><li>Fully associative<ol type="a" id="9cff5089-afe6-4fbf-8e9c-038784b9fbf2" class="numbered-list" start="1"><li>Associativity = # of blocks</li></ol><ol type="a" id="093a9205-4bac-4661-a16f-17d1796f56c6" class="numbered-list" start="2"><li>One set per cache ⇒ Fetched memory can go anywhere</li></ol><ol type="a" id="172538ab-5a4a-4b76-ab03-0a6cdca427f6" class="numbered-list" start="3"><li>No index field, 1 comparator per block</li></ol></li></ol><ol type="1" id="766d2fa2-861f-4c4a-89db-84cfe19bc5a3" class="numbered-list" start="3"><li>N-way Set Associative<ol type="a" id="1d7882bf-8c04-43e4-99c9-b0eb60302f1d" class="numbered-list" start="1"><li>Associativity = N, N places for a block (every set contains N blocks)</li></ol><ol type="a" id="56ddb083-b748-4983-b564-6cd74ea5bb7f" class="numbered-list" start="2"><li># of sets = number of blocks / N</li></ol><ol type="a" id="fa1ac6ed-ca9b-4e70-87c5-327dfe93abb7" class="numbered-list" start="3"><li>N comparators</li></ol></li></ol><p id="6ecae5af-b2f4-42ab-8f42-4bf97fa063a7" class="">
</p><p id="42d17ac5-30a1-4aaa-bbfe-166c92d151a0" class="">Total Cache Capacity = <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi>c</mi><mi>a</mi><mi>c</mi><mi>h</mi><mi>e</mi></mrow></msub><mo>=</mo><mi>A</mi><mi>s</mi><mi>s</mi><mi>o</mi><mi>c</mi><mi>i</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo>×</mo><mrow><mi mathvariant="normal">#</mi><mi>o</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>s</mi></mrow><mo>×</mo><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow></mrow><annotation encoding="application/x-tex">C_{cache} = Associativity \times {\# of sets} \times {block\_size}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">ssoc</span><span class="mord mathnormal">ia</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">#</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">se</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.00444em;vertical-align:-0.31em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oc</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span></span></span></span></span></span><span>﻿</span></span></p><p id="76b004cc-370b-430d-a795-4b2d9934a80a" class="">
</p><p id="d5cc889c-6f7b-4fd3-a328-df5d21496e2a" class=""><strong>Replacement Policy</strong>:</p><p id="df9c320c-ad3d-44e7-a141-fc21836e212b" class="">When miss occurs, which way is a block selected for replacement?</p><ol type="1" id="445bc95d-a11c-412f-baff-a2fc342cd88e" class="numbered-list" start="1"><li>Least Recently Used (LRU): one that has been unused the longest<ol type="a" id="9890fb6c-2019-4c46-8d58-7b27bdb0846f" class="numbered-list" start="1"><li>Must track when each way&#x27;s block was used relative to other blocks in the set</li></ol><ol type="a" id="fef9e12e-14a3-4d9c-94e3-f1c62c78faaf" class="numbered-list" start="2"><li>Example Simple &quot;Psuedo&quot; Implemention:<ol type="i" id="af6e969a-4b85-40be-b671-4e834e0172f6" class="numbered-list" start="1"><li>Hardware replacement pointer points to one cache entry</li></ol><ol type="i" id="baa920b0-0430-40d9-8c6e-096873a8b25a" class="numbered-list" start="2"><li>Whenever access is made to the entry the pointer points to the next entry</li></ol><ol type="i" id="a272376b-637f-49ad-a198-7368d8e7b0c1" class="numbered-list" start="3"><li>Otherwise, don&#x27;t move the pointer</li></ol><ol type="i" id="dfde667a-ab4e-4678-96e7-af40b1a9025c" class="numbered-list" start="4"><li>It&#x27;s actually a &quot;not-most-recently-used&quot; policy</li></ol></li></ol></li></ol><ol type="1" id="63c2a325-64c8-46a1-9db1-06d4d135fbcd" class="numbered-list" start="2"><li>Random Replacement<ol type="a" id="4ec3620e-8797-4a48-920c-b923c014730b" class="numbered-list" start="1"><li>Choose a random block and evict it.</li></ol><p id="9d66c5df-3d2f-4342-839f-2d7ffd724d16" class="">
</p></li></ol><p id="edd7a2bf-0bbe-48b8-9090-f91cfb839a9b" class=""><strong>Types of Cache Miss</strong></p><ol type="1" id="96c7382f-f35d-4a0f-8499-626871ba1048" class="numbered-list" start="1"><li>Compulsory (强制性失误), aka cold start / first reference miss<ol type="a" id="f457bd0b-9343-460a-8dcf-311408b2b7c2" class="numbered-list" start="1"><li>First access to a block</li></ol></li></ol><ol type="1" id="9d37ee69-b1be-43ca-a8c0-1f5688b5bdfa" class="numbered-list" start="2"><li>Capacity (空间性失误)<ol type="a" id="a817a87c-72f4-4e0e-8d52-60b58f518bd9" class="numbered-list" start="1"><li>Cache cannot contain all blocks accessed by the program</li></ol><ol type="a" id="fff27b47-16db-4d80-9954-21665251bb7f" class="numbered-list" start="2"><li><strong>Misses that would not occur with infinite cache</strong></li></ol></li></ol><ol type="1" id="44271331-f605-4ff1-bb32-730f584fc6ff" class="numbered-list" start="3"><li>Conflict (冲突性失误) aka collision miss<ol type="a" id="5ae579d6-808a-4d59-86b4-f5d0f9ab66e8" class="numbered-list" start="1"><li>Multiple memory locations mapped to same cache set</li></ol><ol type="a" id="b82275fc-60f5-401f-9738-0822ee4f5d15" class="numbered-list" start="2"><li><strong>Misses that would not occur with ideal fully associative cache</strong></li></ol></li></ol><ol type="1" id="4b76e08a-09c9-4c3d-9d45-109b7211c6a3" class="numbered-list" start="4"><li>Coherency (连贯性失误) ⇒ Only if sharing data between two processor cores<ol type="a" id="263c230a-37e8-40cb-8f69-bbccb9bb1827" class="numbered-list" start="1"><li>Share a cache line between two processor cores<ol type="i" id="bb4c90d4-72c3-4546-8c69-3feb4660868d" class="numbered-list" start="1"><li>every time one does a write the other will take a cache miss</li></ol><ol type="i" id="870ca805-f5d7-4f91-a106-9fff4142d6b4" class="numbered-list" start="2"><li>Even if writing to different parts of the cache line</li></ol></li></ol><ol type="a" id="bec9898e-0477-4c51-998e-60394e9c23b1" class="numbered-list" start="2"><li>Everyone&#x27;s reading is fine</li></ol></li></ol><p id="9851162e-ca37-4ded-a8de-955d28bd27ba" class="">
</p><p id="5f39112a-506c-40a2-be0d-f12c26c0d083" class="">Write policy:</p><ol type="1" id="c4847a72-5a02-4534-bebe-897522d4180a" class="numbered-list" start="1"><li>Cache Hit<ol type="a" id="8afead6c-3fe3-45a8-bbbf-ab09ad3a47c9" class="numbered-list" start="1"><li>Write-through<ol type="i" id="d9c9e41f-2a66-4973-9a7b-d3cfb427093b" class="numbered-list" start="1"><li>Write cache and write the memory<ol type="1" id="6a6f9fe8-0dd4-48cc-bbcd-c9a39c3def71" class="numbered-list" start="1"><li>Very slow, so include a &quot;write buffer&quot; to allow processor to continue once data is stored in the write buffer.</li></ol><ol type="1" id="7422a159-6277-4cdb-8964-3fb604509995" class="numbered-list" start="2"><li>Buffer will update the data in parallel with the processor.</li></ol></li></ol></li></ol><ol type="a" id="4d521a68-37e3-4967-9de8-c1f9acce6988" class="numbered-list" start="2"><li>Write-back<ol type="i" id="ed3afb32-b07b-41d0-960c-16e449284529" class="numbered-list" start="1"><li>Write only to cache (dirty bit = 1) and only back to memory when the block has to be evicted from cache.</li></ol></li></ol></li></ol><ol type="1" id="983c38bb-6203-45a4-ac9f-3bdefccccceb" class="numbered-list" start="2"><li>Cache miss:<ol type="a" id="7cbcabb5-01d9-43ed-8237-8b11b5290ef2" class="numbered-list" start="1"><li>No-write-allocate: only write to main memory</li></ol><ol type="a" id="4a579f88-87b3-4c3c-9c89-7b66edd5acb1" class="numbered-list" start="2"><li>Write-allocate (fetch on write): fetch into cache</li></ol></li></ol><p id="65cbc4c9-4a31-4651-b7bc-7d17a67605d4" class="">
</p><p id="4b12f58e-42cd-4846-bbc5-bd1d1c3d1a1b" class="">Some extra information stored in cache</p><ol type="1" id="75d7f01a-1774-4b5f-9d9a-8053602225a2" class="numbered-list" start="1"><li>Valid bit<ol type="a" id="cfb6afa3-9a38-4a0f-94b8-c5f63930bfd8" class="numbered-list" start="1"><li>When program start, cache does not have valid information for this program</li></ol><ol type="a" id="046cf369-479e-4cae-96c5-213dac975517" class="numbered-list" start="2"><li>Need an indicator whether this tag entry is valid</li></ol></li></ol><ol type="1" id="f1f1363e-f6d4-4f2a-813b-4612a573b609" class="numbered-list" start="2"><li>Dirty-bit (Write-back policy)<ol type="a" id="464a4c98-70a8-4044-bd4a-dcb0abe8f738" class="numbered-list" start="1"><li>If data in this cache has changed</li></ol></li></ol><ol type="1" id="84e79c42-2b1c-4794-9bd3-461ba82fe8fc" class="numbered-list" start="3"><li>Shared-bit (MOESI policy)<ol type="a" id="6d7d2ed2-4320-475e-afd5-a4d9398c00b4" class="numbered-list" start="1"><li>If this data is official / only / shared copy</li></ol></li></ol><p id="c4ceae33-d084-46c4-8f54-4cc05034d703" class="">
</p><p id="d3200ef4-57a3-4539-8e9c-5bfd6cc746c0" class=""><strong>Cache Coherency Policy - MOESI</strong></p><figure id="1c6ddc6a-0425-4707-8783-c6abbd678189" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/74414D1D-5644-4D11-9959-DDEEC8109DA5.jpeg"><img style="width:1187px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/74414D1D-5644-4D11-9959-DDEEC8109DA5.jpeg"/></a></figure><p id="732026a6-5aad-4e35-b8a0-6689b1ee23f2" class="">
</p><h3 id="1b417a06-d744-49e4-9908-efe1829848c3" class="">Performance Measures</h3><ol type="1" id="1ee889d5-f0c5-413b-946f-d39d39de8810" class="numbered-list" start="1"><li>Hit rate: fraction of accesses that hit in the cache</li></ol><ol type="1" id="55cdf968-a296-410d-a911-0eb775e0d0df" class="numbered-list" start="2"><li>Miss rate: 1 - Hit rate<ol type="a" id="d18da36f-471f-4ef6-92c2-ce7e365c25d7" class="numbered-list" start="1"><li>Global Miss Rate - the fraction of references that miss some level of a multilevel cache<ol type="i" id="fd71837d-4262-4113-9967-125bbf4ff0f9" class="numbered-list" start="1"><li>misses in this ache divided by total number of memory accesses generated by the CPU</li></ol><ol type="i" id="e1f5cff4-8245-4fd7-9ab3-0c6853f91702" class="numbered-list" start="2"><li>the fraction of references to one level of a cache that miss</li></ol></li></ol></li></ol><ol type="1" id="52a00e1d-853f-4a84-a7f2-c8365296c22d" class="numbered-list" start="3"><li>Miss penalty: time to replace a block from lower level in memory hierarchy to cache</li></ol><ol type="1" id="5a70402a-604e-454b-950e-9cebec011bf2" class="numbered-list" start="4"><li>Hit time: time to access cache memory (including tag comparison)</li></ol><ol type="1" id="31558568-8f71-41e6-a025-c80b7ceabbdc" class="numbered-list" start="5"><li>Average Memory Access Time(AMAT) = <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>H</mi><mi>i</mi><mi>t</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><mo>+</mo><mrow><mi>M</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>R</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><mo>×</mo><mrow><mi>M</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>P</mi><mi>e</mi><mi>n</mi><mi>a</mi><mi>l</mi><mi>t</mi><mi>y</mi></mrow></mrow><annotation encoding="application/x-tex">{Hit Time} + {Miss Rate} \times {Miss Penalty}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.13889em;">tT</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ss</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ss</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">e</span><span class="mord mathnormal">na</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span></span><span>﻿</span></span></li></ol><p id="4f101cef-7ccf-49a6-8a00-cb0a22027cfc" class="">
</p><p id="df7cca20-a587-4599-86b3-31a63865840c" class=""><strong>Cache Design Space</strong></p><p id="d3b07dd3-c90f-4407-a95a-ef4707056f00" class="">Several Interacting Dimensions including cache size, block size, associativity, replacement policy, write policy, etc.</p><p id="e648089c-2402-401a-a840-695278fbc65f" class="">Optimal choice is a compromise and depends on access characteristics ⇒ simplicity often wins</p><div id="372ef5fa-9eb8-406f-904c-25505d4134bc" class="column-list"><div id="49501e3c-7afc-4955-abad-0aaed0742e1a" style="width:43.75%" class="column"><figure id="3afd4797-bfe9-42b0-9207-9136ab0d9af0" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/D0B8D6D9-4762-4302-9871-EE71046DB489.jpeg"><img style="width:1154px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/D0B8D6D9-4762-4302-9871-EE71046DB489.jpeg"/></a></figure></div><div id="5ed1ba8f-17cd-4b3d-864a-02c1549b9ccd" style="width:56.25%" class="column"><figure id="005f0919-a6d6-42cb-8829-f27ce115fe3c" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/58907136-2ACC-4EE7-AB12-D848DE3C0597.jpeg"><img style="width:1579px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/58907136-2ACC-4EE7-AB12-D848DE3C0597.jpeg"/></a></figure></div></div><p id="b3b7a97e-d089-4718-8c99-53ce64817daf" class="">Design Choices</p><ol type="1" id="662cb1d5-cf00-4c3e-8889-37bf8d34562e" class="numbered-list" start="1"><li>Increasing Associativity<ol type="a" id="11699839-1578-477b-8fa2-dbdbfef26574" class="numbered-list" start="1"><li>Hit time increases with large step from DM to ≥ 2 ways<ol type="i" id="c90438cd-48ff-4408-afd3-c1f8b6037cde" class="numbered-list" start="1"><li>Since we need to mux correct way to processor</li></ol></li></ol><ol type="a" id="a02dbe0d-de0e-453c-947d-3161076f1240" class="numbered-list" start="2"><li>Hit time slightly increases for further increase in associativity</li></ol><ol type="a" id="e43845c9-b6d2-4677-9fcd-9016bdb596bf" class="numbered-list" start="3"><li>Miss rate goes down due to reduced from conflict misses<ol type="i" id="9eb9de43-969e-4231-bdb5-d65927cd0731" class="numbered-list" start="1"><li>But most gain is from 1→2→4 way with limited benefit from higher associativities</li></ol></li></ol><ol type="a" id="3832629e-48f5-45bb-9226-8f7434845b11" class="numbered-list" start="4"><li>Miss penalty mostly unchanged, since replacement policy runs in parallel with fetching missing line from memory</li></ol></li></ol><ol type="1" id="ccb3fbd6-bc86-4f5b-86f7-c4018f05a9d4" class="numbered-list" start="2"><li>Increasing # of entries<ol type="a" id="a7c99a22-a28b-412f-8f97-6abd4eecab35" class="numbered-list" start="1"><li>Hit time increases since reading tags and data from larger memory structures</li></ol><ol type="a" id="a3648dd2-4b9e-4add-aa1b-1027b725b526" class="numbered-list" start="2"><li>Miss rate goes down due to reduced capacity and conflict misses<ol type="i" id="e09af2b0-f06f-4873-915a-202c7fc48d65" class="numbered-list" start="1"><li>Miss rate drops ~2x for every ~4x increase in capacity</li></ol></li></ol><ol type="a" id="e9ae6ec9-aad5-4710-b3cd-912b39a0a165" class="numbered-list" start="3"><li>Miss penalty unchanged</li></ol><ol type="a" id="97caed7d-1ebc-46ba-ba04-35109489b65b" class="numbered-list" start="4"><li>but at some point, <strong>increase in hit time may overcome the improvement in hit rate</strong>, yielding a decrease in performance</li></ol></li></ol><ol type="1" id="b4bc3e8f-81e3-440e-893c-38377939fadd" class="numbered-list" start="3"><li>Increasing block size<ol type="a" id="43b59127-21be-4c34-a28c-8cd7c6dfba3a" class="numbered-list" start="1"><li>Hit time unchanged but might be <strong>slightly reduced as number of tags is reduced</strong></li></ol><ol type="a" id="08db165f-fcbf-45a7-9d26-4f027db6f2a2" class="numbered-list" start="2"><li>Miss rate <strong>goes down at first</strong> due to spatial locality, then increases due to <strong>increased conflict misses</strong> (fewer blocks in cache)</li></ol><ol type="a" id="1abb6516-3e2e-4074-9bd4-b97a1889d5ab" class="numbered-list" start="3"><li>Miss panelty rises with larger size, but with fixed constant initial latency that is <strong>amortized over whole block</strong>.</li></ol></li></ol><ol type="1" id="4b1db437-1770-4a79-8f73-48c491886814" class="numbered-list" start="4"><li>Add a &quot;<strong>victim cache</strong>&quot;<ol type="a" id="8d198449-b9c6-4979-aba5-7278e5bd6036" class="numbered-list" start="1"><li>Small fully associative cache that holds the last few evicted cache lines</li></ol><ol type="a" id="380c9de2-0c28-4db0-85f2-82b8beb9facd" class="numbered-list" start="2"><li></li></ol></li></ol><p id="a9481350-fe79-4e08-b5ef-254d5a1c01cb" class="">
</p><h2 id="67bc8640-eaaa-4814-be4d-6227215c0a61" class="">Operating System</h2><ol type="1" id="16232c20-f7fe-4c92-96e3-821b2e6742ae" class="numbered-list" start="1"><li>Runs before any user programs (after BIOS and boot loader) when computer is first turned on, and intermittently runs as long as computer is on.</li></ol><ol type="1" id="f8c90a8c-30f5-4184-bf86-7a42163c80b6" class="numbered-list" start="2"><li>Finds and controls all I/O devices in the machine in a general way<ol type="a" id="d568dbd5-0d0b-4fb1-9a96-ce9b4881a316" class="numbered-list" start="1"><li>Relying on hardware-specific &quot;device drivers&quot;</li></ol></li></ol><ol type="1" id="a246d06e-9060-4aca-a861-e1ffe13e00d4" class="numbered-list" start="3"><li>Starts Services(100+)<ol type="a" id="a4bc486f-1f4f-425e-be2b-d66a1c54469e" class="numbered-list" start="1"><li>File System,</li></ol><ol type="a" id="2692c141-99a9-40f8-a14c-e72f4e5d62aa" class="numbered-list" start="2"><li>Network Stack (Ethernet, WIFI, Bluetooth...)</li></ol></li></ol><ol type="1" id="441c744c-f41a-4b35-a929-83bf2cb03e37" class="numbered-list" start="4"><li>Loads, runs and manages programs<ol type="a" id="93c8ce20-295a-496c-9f50-e95f2bf69512" class="numbered-list" start="1"><li>Multiple programs at the same time (time-sharing)</li></ol><ol type="a" id="0a5934fa-4caf-424d-9f7d-0198a68b65ca" class="numbered-list" start="2"><li>Isolate programs from each other (isolation)</li></ol><ol type="a" id="5739ec4f-963b-4d55-9c01-0884fa417bb4" class="numbered-list" start="3"><li>Multiplex resources between applications (e.g. devices)</li></ol></li></ol><p id="f08e23ee-7a41-4bc0-9677-652436135cc0" class="">
</p><h3 id="dff3aab1-1c50-4de0-950f-bf387041b564" class="">Sharing Of Resources</h3><ol type="1" id="71d3eed8-74d7-4bbc-a405-803b11e65467" class="numbered-list" start="1"><li>OS gives each process <strong>isolation </strong>even when multiple processes share the same hardware resources</li></ol><ol type="1" id="738412f1-4a26-4f80-bab1-15b3de40cd77" class="numbered-list" start="2"><li>Each process has the view that it &quot;owns&quot; the whole machine when it is running</li></ol><ol type="1" id="88760ad6-8657-4bf3-a780-81c966e464ce" class="numbered-list" start="3"><li>Share time on the CPU: <strong>Context Switch</strong><ol type="a" id="74afd938-5041-4ad3-bdd3-9e20d9163a9e" class="numbered-list" start="1"><li>Change from one process to another on the CPU Core</li></ol><ol type="a" id="ace4039a-4bd8-4081-b766-3baee77c02bf" class="numbered-list" start="2"><li>Save and restore the state of current process to pick up where it is left off (running status ⇒ runnable status)</li></ol></li></ol><ol type="1" id="29ab2592-17c3-4928-9de5-8908f6d5ba2f" class="numbered-list" start="4"><li>Share space in memory: <strong>Virtual Memory</strong><ol type="a" id="c61172aa-ec4c-4eed-8813-a4bda7d29f95" class="numbered-list" start="1"><li>Each process has the &quot;illusion&quot; of access to the full address space</li></ol><ol type="a" id="2ffecf90-6ee8-42ef-b294-2542cd5c1de1" class="numbered-list" start="2"><li>One process cannot see what another process has stored in memory</li></ol></li></ol><ol type="1" id="5cb89dc9-9dd1-41e7-9d9a-bb8aac765d75" class="numbered-list" start="5"><li>Requires following from hardware<ol type="a" id="4a898bd8-c944-4562-8580-69a1508274f8" class="numbered-list" start="1"><li>Memory translation<ol type="i" id="1cec7e81-85d8-4166-9088-067720534267" class="numbered-list" start="1"><li>Each running process has a mapping from &quot;virtual&quot; to &quot;physical&quot; addresses that are different for process</li></ol><ol type="i" id="db1cff57-a9b3-4f77-b4ee-080cb72fa3e7" class="numbered-list" start="2"><li>When doing load/store, the program issues a virtual address, but actual memory stored is a physical address</li></ol></li></ol><ol type="a" id="0afb7cee-6761-4c28-8e52-142f832eea2a" class="numbered-list" start="2"><li>Protection and privilege<ol type="i" id="6e8f7554-540d-4788-9455-eb9ce1735cec" class="numbered-list" start="1"><li>Split the processor into at least two running modes: &quot;User&quot; and &quot;Supervisor&quot;</li></ol><ol type="i" id="230eac22-65af-4077-bcc1-a38cd842ea79" class="numbered-list" start="2"><li>Lesser privilege cannot change its memory mapping</li></ol><ol type="i" id="9e4ab9a8-0cbd-47c9-816f-1b0369d8db5b" class="numbered-list" start="3"><li>But Supervisor can change the mapping for any given program, and also has its own set of mapping of virtual ⇒ actual</li></ol></li></ol><ol type="a" id="aab29962-1354-4971-93f9-dae850e2289c" class="numbered-list" start="3"><li>Traps &amp; Interrupts<ol type="i" id="f9db0f3b-0bff-4431-97fa-ec2cb83a3781" class="numbered-list" start="1"><li>A way of going into Supervisor mode on demand</li></ol></li></ol><ol type="a" id="2381368b-485f-4907-b2ef-bb855c3c7622" class="numbered-list" start="4"><li>CSR Registers ⇒ &quot;Control and Status Registers&quot;<ol type="i" id="95520c46-7739-44a4-beac-8086698e0a80" class="numbered-list" start="1"><li><code>CSRRW rd rs csr</code> means<ol type="1" id="b16d31b5-e587-4da8-b465-568aceabc668" class="numbered-list" start="1"><li>read the old value of the specific control and status register and put it into rd</li></ol><ol type="1" id="89968995-bafa-4227-923a-df2329d76e9c" class="numbered-list" start="2"><li>If rs ≠ x0, place the new value in the CSR</li></ol></li></ol><ol type="i" id="8bee67ab-2464-4d13-8a81-01dcd4ff8414" class="numbered-list" start="2"><li>They are sed to communicate requests with the hardware</li></ol><ol type="i" id="6b0d06d0-28f5-4723-98ce-111c565f5024" class="numbered-list" start="3"><li>The hardware enforces privileges, so program running at User level cannot change Supervisor-level CSRs.</li></ol></li></ol></li></ol><p id="386e3544-ab89-446e-a0cf-07eecc25487b" class="">
</p><h3 id="b633119c-8fba-478f-a886-e40ad8f258ac" class="">Traps / Interrupts / Exceptions</h3><figure id="62df65ec-b2e2-4624-bb19-134932771f00" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/216F2716-8786-4146-9B3E-467915DC4D4B.jpeg"><img style="width:1740px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/216F2716-8786-4146-9B3E-467915DC4D4B.jpeg"/></a></figure><p id="9cb94fd9-f251-488d-86a3-5fae0ecc4c0a" class="">
</p><ol type="1" id="5e3057c4-edb9-455f-a115-63b413a00d4c" class="numbered-list" start="1"><li>Interrupt<ol type="a" id="541ce8e5-60eb-425b-8085-18f53f8d3009" class="numbered-list" start="1"><li>Caused by an event <strong>external </strong>to current running program</li></ol><ol type="a" id="a60ed813-f700-4ba8-a6db-4bf56e510bca" class="numbered-list" start="2"><li>e.g. Key press, disk I/O</li></ol><ol type="a" id="1485d8cf-eb8a-4620-8154-31e62f400395" class="numbered-list" start="3"><li>Asynchronous to current program, we can handle interrupt on any convenient instuction<ol type="i" id="53c87638-2f96-4394-8e6a-6c07f653d384" class="numbered-list" start="1"><li>&quot;Whenever it&#x27;s convenient, just don&#x27;t wait too long&quot;</li></ol></li></ol></li></ol><ol type="1" id="08a79a2c-61f7-4511-96ac-7632a6dd1ca8" class="numbered-list" start="2"><li>Exception<ol type="a" id="018ac1ed-dc11-4aa5-9d72-1b83854a477f" class="numbered-list" start="1"><li>Caused by some event <strong>during </strong>execution of one instruction of current running program</li></ol><ol type="a" id="1b69b210-7469-43b1-8afa-b932556ff63b" class="numbered-list" start="2"><li>e.g. Memory Error, Bus Error, Illegal Instruction, Raised Exception</li></ol><ol type="a" id="16459981-11b8-4b1b-9a97-c435fdcc8147" class="numbered-list" start="3"><li>Synchronous <ol type="i" id="5cba19ca-b896-4054-844a-b6b86f085621" class="numbered-list" start="1"><li>Must handle exception precisely on instruction that caused the exception</li></ol><ol type="i" id="1b5a68e6-8a1b-490d-a3a2-57991af1bf9a" class="numbered-list" start="2"><li>&quot;Drop whaever you are doing ad act now&quot;</li></ol></li></ol></li></ol><ol type="1" id="e01d3380-595d-4f2c-ac63-6b53f89b112f" class="numbered-list" start="3"><li>Trap<ol type="a" id="eddd83ea-3def-4b71-a16c-51ff22052ae1" class="numbered-list" start="1"><li>Action of servicing interrupt or exception by hardware jump to &quot;interrupt or trap handler&quot; code</li></ol></li></ol><p id="a95ac79e-9267-49a0-9223-f37aedfc3d97" class="">
</p><p id="9e4589b8-a35e-44fe-a5c5-a4c01ec610ae" class=""><strong>Trap Handler&#x27;s View</strong></p><ol type="1" id="cf9a8a06-565a-4f47-b15b-d1c3cb9ecd2d" class="numbered-list" start="1"><li>View of machine state is that every instruction prior to the trapped one has completed, and no instruction after the trap has executed.</li></ol><ol type="1" id="4f57586c-9a70-47d6-b4ac-7230f048f72f" class="numbered-list" start="2"><li>Implies that handler can return from an interrupt by restoring user registers and jumping back to interrupted instruction<ol type="a" id="d7ebd49a-9ed7-446f-a1af-096aebabfa16" class="numbered-list" start="1"><li>Interrupt handler software doesn&#x27;t need to understand the pipeline of the machine, or what program was doing</li></ol><ol type="a" id="4550892e-234a-4b79-a1aa-6326af3840f6" class="numbered-list" start="2"><li>More complex to handle exception by interrupt</li></ol></li></ol><ol type="1" id="013cad14-7638-4370-8f82-aa3a3e7eef05" class="numbered-list" start="3"><li>Providing precise traps is tricky in a pipelined superscalar out-of-order procecssor!</li></ol><p id="51df5729-fa23-419a-a56a-2d7151252a20" class="">
</p><p id="bf1bcc17-2925-4ebc-9bc5-fc71981577db" class=""><strong>Hardware Action</strong></p><ol type="1" id="20fb3ac9-d057-41e0-8e54-290e55033886" class="numbered-list" start="1"><li>Let&#x27;s say we&#x27;re running program A and all of a sudden in MA(memory access) stage program A did a invalid memory read!</li></ol><ol type="1" id="4511bd7f-88ff-408f-a589-8835e639ad14" class="numbered-list" start="2"><li>Hardware first flush instructions currently in pipeline (convert to nops or &quot;bubbles&quot;)</li></ol><ol type="1" id="a86c14ec-f158-4bb7-97a9-b9b58e95c427" class="numbered-list" start="3"><li>Then it adjust the privilege level</li></ol><ol type="1" id="e2a85f80-c80e-4d49-9d98-2d732174f850" class="numbered-list" start="4"><li>Then it disables interrupts<ol type="a" id="94fea509-da2d-426a-8731-fd1829657253" class="numbered-list" start="1"><li>We don&#x27;t want to get interrupted when handling an interrupt</li></ol></li></ol><ol type="1" id="e7cf6003-5604-4e45-b520-03617d3371cd" class="numbered-list" start="5"><li>Write the old program counter into the <code>sepc</code> CSR<ol type="a" id="799d02dc-78f0-414a-a1d9-5ff9a2352353" class="numbered-list" start="1"><li>It&#x27;s the PC that triggered the exception (or first instruction that hasn&#x27;t yet executed if an interrupt)</li></ol></li></ol><ol type="1" id="3832601c-0d48-4bcf-9bb3-1fe4e3ae95dc" class="numbered-list" start="6"><li>Write the reason into the <code>scause</code> CSR</li></ol><ol type="1" id="ad3edbd5-298f-44de-974f-81501cd5d648" class="numbered-list" start="7"><li>Set the PC to the value in the <code>stvec</code> CSR<ol type="a" id="16135ad9-ee0d-4fe8-b022-4f82770c0a09" class="numbered-list" start="1"><li>This is the address of the &quot;trap handler&quot; ⇒ Single function that handles ALL exceptions and interrupts</li></ol></li></ol><p id="3dfc28b3-b1b5-4aa1-8654-2cc87b6517b1" class="">
</p><p id="de81994c-2e18-44d0-8e36-bee3aa71bfaa" class=""><strong>Software Action</strong></p><ol type="1" id="b741a68b-ce3f-4034-a6f0-d0ed87db33d4" class="numbered-list" start="1"><li>Save all the registers<ol type="a" id="1c109112-3ae2-4a2f-9dcb-93569ac91f71" class="numbered-list" start="1"><li>Intent is to make the previous program think that nothing whatsoever actually happened!</li></ol><ol type="a" id="173dc09b-1631-4ede-a975-22e89a4b0217" class="numbered-list" start="2"><li>Steps<ol type="i" id="f72ea1c7-ed39-4612-8814-be74845e5d57" class="numbered-list" start="1"><li>Suervisor mode has a <code>sscratch</code> CSR<ol type="1" id="2a0947b6-f443-42df-aaf2-ad9868d0463f" class="numbered-list" start="1"><li>Use it to point to a piece of memory to store things for the trap handler</li></ol></li></ol><ol type="i" id="b6e80e48-881d-4cd7-a17c-1ca8948f2788" class="numbered-list" start="2"><li>Swap x1 for sscratch<ol type="1" id="ff4ee8e9-1d23-4f15-9653-8aba03fb75bf" class="numbered-list" start="1"><li><code>csrrw x1 x1 sscratch</code></li></ol></li></ol><ol type="i" id="0e7d93a2-51a7-4395-92fa-f14a255f8a01" class="numbered-list" start="3"><li>Now save all the other registers into that location<ol type="1" id="e4f95c7b-8dd0-42ae-bb89-738ee3d33fb9" class="numbered-list" start="1"><li><code>sw x2 4(x1)</code></li></ol><ol type="1" id="1a4a9f65-9bbe-412c-b18f-d68a00a47bef" class="numbered-list" start="2"><li><code>sw x3 8(x1)</code></li></ol><ol type="1" id="87baab00-61d8-420e-bbf3-92cd4d51bfdd" class="numbered-list" start="3"><li>...</li></ol></li></ol><ol type="i" id="c4411267-366f-4379-8501-095486511b06" class="numbered-list" start="4"><li>Store the PC from the sepc CSR<ol type="1" id="54f078e6-c69c-4877-9ca6-6b94b1c21cf1" class="numbered-list" start="1"><li><code>csrrw x2 x0 sepc</code></li></ol><ol type="1" id="4c112a2d-0b42-4e1d-b816-342f7ab65510" class="numbered-list" start="2"><li><code>sw x2 124(x1)</code></li></ol></li></ol><ol type="i" id="5787a3c9-3979-4819-9404-cd7a8024d235" class="numbered-list" start="5"><li>finally save x1 and restore sscratch<ol type="1" id="953844e9-b44c-4585-a34c-0bb14d7ff9df" class="numbered-list" start="1"><li><code>csrrw x2 x1 sscratch</code></li></ol><ol type="1" id="f6ad4f24-e510-4c63-b2a0-c76d3246c04f" class="numbered-list" start="2"><li><code>sw x2 0(x1)</code></li></ol></li></ol></li></ol></li></ol><ol type="1" id="b1820234-2fda-448f-aad0-9bc42a864b21" class="numbered-list" start="2"><li>Figure out what the exception or interrupt is<ol type="a" id="696ada21-62bc-47fa-9a6b-08abd0924432" class="numbered-list" start="1"><li>Read the appropriate CSRs and other pieces to do what is necessary</li></ol></li></ol><ol type="1" id="c1e8e010-5340-423f-a6ad-d566c5dbc0dc" class="numbered-list" start="3"><li>Restore all the registers<ol type="a" id="b5a96d22-e3f4-4fbc-88a9-ad12dc53b0d2" class="numbered-list" start="1"><li>Restore the value for <code>sepc</code><ol type="i" id="c1984f06-474a-4424-9353-f60779065e3e" class="numbered-list" start="1"><li>If ECALL, increment by 4 to make it look like a function call</li></ol><ol type="i" id="e1be0c95-567c-421d-a23e-0613610dfd16" class="numbered-list" start="2"><li>otherwise just redo the instruction that triggered the exception</li></ol></li></ol><ol type="a" id="59c78715-c4a6-411d-b300-6887da254c53" class="numbered-list" start="2"><li>Swap x1 temporarily using sscratch</li></ol><ol type="a" id="c8449164-0e96-4ba7-bba9-c89b3edd0230" class="numbered-list" start="3"><li>if an ECall, set a0 to the returned value</li></ol></li></ol><ol type="1" id="82fb5350-ae61-43dc-99c7-6354b59b872b" class="numbered-list" start="4"><li>Return to the right point in execution<ol type="a" id="69c86de7-9ea4-4767-8b3d-2a270a5b2205" class="numbered-list" start="1"><li>execute the SRET instruction</li></ol><ol type="a" id="0cf882d4-0f75-42f6-86c4-6db20763515b" class="numbered-list" start="2"><li>back to the hardware</li></ol></li></ol><p id="242c3cdb-faca-4ae7-9484-191f4b4bb6f8" class="">
</p><p id="1e305a57-4c85-42e8-a6c1-96b23887f2fc" class=""><strong>Hardware Action Again</strong></p><ol type="1" id="73cf0bd0-da61-4ab1-acc3-979f1e75d9d5" class="numbered-list" start="1"><li>Re-enable interrupts<ol type="a" id="111ea54e-dc6f-4695-8eff-a887e38c5f67" class="numbered-list" start="1"><li>Now we&#x27;re done with trap handler we can get interrupted again</li></ol><ol type="a" id="299cce91-6097-491a-b454-4b4a0f4561bb" class="numbered-list" start="2"><li>Reset back down to user level</li></ol><ol type="a" id="95d1633c-98bf-492b-b2d7-da0e49a2554f" class="numbered-list" start="3"><li>Restore the PC to the value of sepc</li></ol><p id="21d345cc-0473-4fd5-a1be-f0be0055d4ac" class="">
</p></li></ol><p id="e9c38472-4e44-4bde-9441-901ce22e28fd" class="">Now the progra continues on like nothing ever happened.</p><p id="f1951858-ac5c-4208-8612-ffe6867133c3" class="">Caches probably got trashed ⇒ for security reasons</p><p id="9431bd22-edc2-4351-877a-7e05f4084126" class="">
</p><p id="aa8d7175-0cad-4a99-a0b5-5fb5a9f574af" class=""><strong>Context Switch</strong></p><ol type="1" id="ea1413b5-9c2b-48d4-bb32-aa330f32ea89" class="numbered-list" start="1"><li>Hardware provides the OS an interrupt - &quot;timer interrupt&quot;<ol type="a" id="c6f8d5f2-472c-4411-9385-4fc370d24c18" class="numbered-list" start="1"><li>At a regular interval</li></ol></li></ol><ol type="1" id="ed431020-1e9b-4ec2-a693-1dc7711b872b" class="numbered-list" start="2"><li>Whe triggered, trap handler can execute a context swtich<ol type="a" id="9f15b816-f568-4ec4-a057-7083bea4ec7d" class="numbered-list" start="1"><li>Take those saved registers that were stored in the area pointed to by sscratch</li></ol><ol type="a" id="7384ba1a-d8d8-48eb-a530-0c9251593a5c" class="numbered-list" start="2"><li>copy them to a bookkeeping data structure for current process(Process Control Block)</li></ol><ol type="a" id="b9f2ad68-d32b-456a-a27b-8d8e2ba6ab6b" class="numbered-list" start="3"><li>copy the <code>satp</code>(table pointer) value to that data structure so we know its memory mapping</li></ol></li></ol><ol type="1" id="5c6385a6-3825-45f5-b46d-342b450765f2" class="numbered-list" start="3"><li>Pick some other process&#x27;s data structure<ol type="a" id="30d1d86b-625b-4aeb-b257-c9ef27d41c7e" class="numbered-list" start="1"><li>Deetermined by the &quot;<strong>scheduler</strong>&quot; (调度器) ⇒ See CS162</li></ol><ol type="a" id="69eee851-f04a-486f-8699-495e2a783e60" class="numbered-list" start="2"><li>Load the process&#x27;s registers, satp, sepc, etc.</li></ol><ol type="a" id="72145110-89b9-4428-af45-5facc8a41a7d" class="numbered-list" start="3"><li>Tell the caches to flush themselves<ol type="i" id="17f77788-a5b4-4ca7-bbe9-09c87cf3e393" class="numbered-list" start="1"><li>Needed for proper isolation</li></ol><ol type="i" id="5a5af753-41e9-4ce4-a715-c0712a3ebf84" class="numbered-list" start="2"><li>We&#x27;d be taking a ton of misses anyway since the new process has no temporal locality with the old process</li></ol></li></ol></li></ol><ol type="1" id="2bdf8e3b-9fc8-4d58-ad7f-d6fed1709568" class="numbered-list" start="4"><li>return with <code>sret</code></li></ol><p id="fc8baeb7-4979-4085-8219-61bf37041946" class="">
</p><h3 id="c7f8fef4-18d0-4f4c-8e1e-34726669e03d" class="">I/O</h3><p id="f6d9cec6-4007-4c64-9703-c8b874a25e78" class="">Options</p><ol type="1" id="d23580ee-55ab-468e-882f-202239020c3c" class="numbered-list" start="1"><li>Special input/output instructions &amp; hardware</li></ol><ol type="1" id="2eeee490-624d-4259-9fa5-fe44d6a356a0" class="numbered-list" start="2"><li>Memory mapped I/O<ol type="a" id="5cfa5352-aef4-45a9-a958-c2d09ab2a935" class="numbered-list" start="1"><li>portion of address space dedicated to I/O</li></ol><ol type="a" id="96cfb354-693b-44d2-8f19-3c1fc5118e38" class="numbered-list" start="2"><li>I/O device registers there (no memory)</li></ol><ol type="a" id="9882aff3-5998-4a7f-b7f0-7a8fcc0dcf15" class="numbered-list" start="3"><li>Use load/store instructions</li></ol></li></ol><p id="2e29dc76-d12d-469b-b86e-7b5517bf5f5b" class="">
</p><p id="3b892cd7-96ee-4734-ac28-05cc4ad54a33" class=""><strong>I/O Models</strong></p><p id="eb909ff5-07b5-4f2c-a962-400091ea7cab" class="">Common I/O devices neither deliver nor accept data matching processor speed</p><p id="b2db2186-b38d-4f44-b5cf-136856af84de" class="">So we have two models(Programmed IO)</p><ol type="1" id="ef0aeb28-f157-47e2-b44e-87264a4276c6" class="numbered-list" start="1"><li>Polling<ol type="a" id="30f7f0df-48a3-4e2f-9679-e1f82b0580a9" class="numbered-list" start="1"><li>Processor checks status before acting</li></ol><ol type="a" id="d352d819-ddd2-4c7e-85e3-df7fdaddf672" class="numbered-list" start="2"><li>Device registers generally serve two functions<ol type="i" id="28e51c5e-a06c-46ec-9c0f-fb0e340632c8" class="numbered-list" start="1"><li>Control Register - says it&#x27;s OK to read/write (IO Ready)</li></ol><ol type="i" id="048b2245-c669-4867-a4d4-feda72334846" class="numbered-list" start="2"><li>Data Register - contains data</li></ol></li></ol><ol type="a" id="78306f3a-ff7b-47ae-9986-73d7fc0aff98" class="numbered-list" start="3"><li>Processor reads from Control Register in loop<ol type="i" id="b797c013-98a5-4660-b55c-1de56da5e07e" class="numbered-list" start="1"><li>Waiting for device to set Ready bit in Control Register (0 → 1)</li></ol></li></ol><ol type="a" id="a0819499-ea38-45e1-922b-634519afe6ca" class="numbered-list" start="4"><li>Processor then loads from (input) or writes to (output) data register</li></ol></li></ol><ol type="1" id="f576a408-33aa-45d1-baf7-e25add4acb2d" class="numbered-list" start="2"><li>I/O Interrupt<ol type="a" id="780d4d39-04bf-4f52-b34f-93093d93e0c5" class="numbered-list" start="1"><li>Interrupt when IO is ready or needs attention<ol type="i" id="55666299-8a04-45a6-a9b5-0efe550ccfac" class="numbered-list" start="1"><li>Interrupt current program</li></ol><ol type="i" id="fb0caf3e-ded3-49e2-ae13-3a7a4727e6b5" class="numbered-list" start="2"><li>Transfers control to the trap handler in the operating system</li></ol></li></ol><ol type="a" id="b904cdf9-3ba2-472c-866e-fdca19888d8b" class="numbered-list" start="2"><li>If there&#x27;s a lot of IO,<ol type="i" id="91078f38-05cc-476a-9667-7a074f81b919" class="numbered-list" start="1"><li>We are spending a lot on context switch, flsuhing caches, pipeline flush, etc.</li></ol></li></ol></li></ol><ol type="1" id="586684b2-0fc6-42c9-a472-e3a91221c851" class="numbered-list" start="3"><li>Both not ideal because<ol type="a" id="1ac82eb3-7d90-4f0f-8b8b-34ecca0af2bd" class="numbered-list" start="1"><li>Device speeds don&#x27;t align well with CPU speeds</li></ol><ol type="a" id="e7faf502-9310-43c0-8726-6645fc14ae91" class="numbered-list" start="2"><li>Energy cost of using beefy general-purpose CPU where simpler hardware would suffice</li></ol><ol type="a" id="8c9e266f-3d2f-476c-858b-82c2c432b4ab" class="numbered-list" start="3"><li>So comes Direct-Memory-Access (DMA)</li></ol></li></ol><p id="70171172-347f-4392-a7eb-b75a966edc46" class="">
</p><p id="f186f718-80e2-44f3-884b-3eaa13f8389b" class="">Real World(without DMA):</p><ol type="1" id="62d2834b-4c1c-448e-a60a-dd643f00c88d" class="numbered-list" start="1"><li>Low data rate<ol type="a" id="26db518a-cedd-42c7-8b3c-2e27c0e343f1" class="numbered-list" start="1"><li>we should use interrupts because overhead of interrupts ends up being low</li></ol><ol type="a" id="75b0daf5-6de9-4260-8dd1-cc847270709f" class="numbered-list" start="2"><li>but in practice, USB hardware only supports polling</li></ol></li></ol><ol type="1" id="c15992fc-fca8-4cc3-9880-d500bea3b3cd" class="numbered-list" start="2"><li>High data rate<ol type="a" id="6d30a553-6d85-4dbd-b587-4856cf65e393" class="numbered-list" start="1"><li>Start with interrupts<ol type="i" id="864876c1-caf8-4928-93f5-3f258dc16b23" class="numbered-list" start="1"><li>If there&#x27;s no data, we don&#x27;t do anything</li></ol></li></ol><ol type="a" id="22f546f7-36d8-4a46-9bd0-90cb6631e1be" class="numbered-list" start="2"><li>Once start getting data<ol type="i" id="fa0c39d6-4611-4a48-a1b2-a0f44c6adeef" class="numbered-list" start="1"><li>We start polling</li></ol><ol type="i" id="3161d921-667c-4d1e-9b78-13014e85f001" class="numbered-list" start="2"><li>Or we use Direct Memory Access (DMA) ⇒ The device just writes the data into memory directly.</li></ol><p id="6a940e70-3e25-476f-88d8-ec21c548b2c0" class="">
</p></li></ol></li></ol><p id="2884e5d4-3969-44e3-8bcf-791014e70db9" class="">DMA:</p><div id="6c5a3244-9a8e-4de6-b1d8-99f0cd1f8418" class="column-list"><div id="f9710ab9-4612-4416-b608-2506a8b7efe1" style="width:50%" class="column"><ol type="1" id="be769cfb-87d4-4bde-af05-95978f438cf6" class="numbered-list" start="1"><li>Contains CSR registers written by CPU<ol type="a" id="189ad9e1-dd2b-4f07-a10f-ae2fe58fb07d" class="numbered-list" start="1"><li>Memory address to write/read data</li></ol><ol type="a" id="2144d3bc-36ce-494c-abe3-571d911e91f6" class="numbered-list" start="2"><li># of bytes</li></ol><ol type="a" id="c6035917-21f3-48e4-b03b-6ea785e40711" class="numbered-list" start="3"><li>I/O device #, direction of transfer</li></ol><ol type="a" id="471ff540-3860-4eea-8cae-e28d2d983817" class="numbered-list" start="4"><li>unit of transfer, amount to transfer per burst</li></ol></li></ol></div><div id="7484c3bb-071a-4b17-bb3d-bdd52ee5c98f" style="width:50%" class="column"><figure id="01a5cb82-9cdb-4ed9-8bc5-0e90ce328bd4" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/413287B2-20F2-4CF8-A859-D4F484BA260D.jpeg"><img style="width:1901px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/413287B2-20F2-4CF8-A859-D4F484BA260D.jpeg"/></a></figure></div></div><div id="e2638bfa-a39a-411c-8e2c-2691ec0d8d0c" class="column-list"><div id="4f507119-bcac-4fc0-9ca6-37d03843f717" style="width:50%" class="column"><p id="dfdc0d14-af78-4131-8d6c-cdc8d75c9cd1" class="">DMA: Incoming Data</p><ol type="1" id="ccfd34c9-5ba5-4db3-b493-1b9eaf0ae456" class="numbered-list" start="1"><li>Receive Interrupt from device</li></ol><ol type="1" id="5cab3ef1-eef1-43a8-8608-c3814f15713e" class="numbered-list" start="2"><li>CPU takes interrupt, initiates transfer<ol type="a" id="81766f8e-0eac-4b90-bc37-48ab29c08b56" class="numbered-list" start="1"><li>Instructs DMA engine to place data at certain address</li></ol></li></ol><ol type="1" id="6189e174-a927-46ae-bdbd-8cbc81a64111" class="numbered-list" start="3"><li>DMA engine handle the transfer<ol type="a" id="452fb5b8-e1fb-477e-8ff0-1b19e03985fa" class="numbered-list" start="1"><li>CPU execute other things</li></ol></li></ol><ol type="1" id="fdf38021-15e5-4bdc-be4c-7b1733baa5d2" class="numbered-list" start="4"><li>Upon completion, Device/DMA engine interrupts the CPU</li></ol></div><div id="c1403154-4aba-4842-a3d7-4ddea422d6ea" style="width:50%" class="column"><p id="2af1b09e-a80c-4776-a3df-4aa580ebc7c5" class="">DMA: Outgoing Data</p><ol type="1" id="2beba19e-a0b4-4c8b-8449-49fb978bc242" class="numbered-list" start="1"><li>CPU decides to initiate transfer, confirms that external device is ready</li></ol><ol type="1" id="a1eeedb5-7866-4bd7-8416-8b841febb19e" class="numbered-list" start="2"><li>CPU initiates transfer<ol type="a" id="e96672b9-7bbc-4e40-8740-6310c562426f" class="numbered-list" start="1"><li>Instructs DMA engine that data is available at certain address</li></ol></li></ol><ol type="1" id="5f8fd4f7-3b72-4e34-8387-fb3ff27b1775" class="numbered-list" start="3"><li>DMA engine handle the transfer<ol type="a" id="6791c45d-fd11-4b7c-9c80-62873e502714" class="numbered-list" start="1"><li>CPU is free to execute other things</li></ol></li></ol><ol type="1" id="48991308-5ef6-43eb-a4e7-b3c01d65ac5c" class="numbered-list" start="4"><li>DMA engine interrupts the CPU again to signal completion</li></ol></div></div><p id="65e593f8-ca57-4c26-9738-ee9430d90b11" class="">Where to place DMA engine?</p><p id="065b0c8a-0027-4fb4-8e19-8092a9c635ec" class="">Since DMA messes around with memory, where in the memory hierachy do we plug in the DMA engine?</p><ol type="1" id="1fc53cde-831b-40c5-b046-647b2370e69a" class="numbered-list" start="1"><li>Between L1 and CPU?<ol type="a" id="34a4e707-ba80-4dae-900a-9546cd9049d4" class="numbered-list" start="1"><li>Free coherency ⇒ means our memory and cache will stay consistant</li></ol><ol type="a" id="87f57167-1716-4679-9b94-f57f509c9b79" class="numbered-list" start="2"><li>Trash the CPU&#x27;s working set with transferred data</li></ol></li></ol><ol type="1" id="9cc664ed-3b70-4466-80ba-a99ec11b6ff4" class="numbered-list" start="2"><li>Between last-level cache and main memory<ol type="a" id="307beaac-6e5e-4909-ba11-de6c56aab046" class="numbered-list" start="1"><li>Don&#x27;t mess with caches</li></ol><ol type="a" id="59200360-f713-4bd3-b006-7a73325350be" class="numbered-list" start="2"><li>But need to explicitly manage coherency</li></ol></li></ol><ol type="1" id="228a7606-c405-41dd-bba3-7d4e5a242cd2" class="numbered-list" start="3"><li>Or just treat like another node in a multiprocessor<ol type="a" id="1d1d27dc-35b5-4338-bc4d-bdcee8c5ca50" class="numbered-list" start="1"><li>what modern computers do</li></ol><ol type="a" id="fbbc1c46-d23c-4619-b6ff-2766394f3618" class="numbered-list" start="2"><li>DMA engine just acts like another processor for the cache coherence mechanisms</li></ol></li></ol><p id="f6cf9156-1d23-4d54-91e6-a604843bc2de" class="">
</p><p id="07b61642-1ba9-4652-9d55-e43357571078" class="">
</p><h3 id="01ee367c-ef4e-4825-8128-c0f0a9c9dda3" class="">Virtual Memory</h3><p id="69c90104-141d-44fc-a3f4-ed8d20a07a59" class="">Supervisor mode alone isn&#x27;t enough, we need applications to be able to access only their own memories.</p><p id="b5e5b1e3-f165-44e1-affb-2f6e3b9b6fcf" class="">Virtual Mem is good because...</p><ol type="1" id="150d3a86-9707-4bed-ac2d-36c083850cfa" class="numbered-list" start="1"><li>Protection &amp; Privacy<ol type="a" id="83d0db71-3e04-4405-820d-ec2b48ccc801" class="numbered-list" start="1"><li>Each user have their own private address space and one or more shared address psaces</li></ol></li></ol><ol type="1" id="d4764714-7e3d-4520-87dd-cb5abd55ab89" class="numbered-list" start="2"><li>Demand Paging<ol type="a" id="c4b4b68f-eb3c-4c21-99d4-1b331bcc4a0c" class="numbered-list" start="1"><li>provides the ability to run programs larger than primary memory</li></ol><ol type="a" id="aaf9d42f-18b1-426b-98d9-e191bc8223ed" class="numbered-list" start="2"><li>But the system might start <strong>thrashing </strong>(repeatedly copy data to and from disk) when your working set exceeds physical memory.</li></ol></li></ol><figure id="b8d0cb56-7532-4882-94f4-328ca007efc5" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/6CF4102B-5455-4FB4-80A9-EB9A039D973E.jpeg"><img style="width:1846px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/6CF4102B-5455-4FB4-80A9-EB9A039D973E.jpeg"/></a></figure><p id="e5ca73af-165b-4930-bdfb-5349a98affaa" class="">
</p><p id="da964d4d-a933-4d7e-9d6e-63607a556dc2" class="">A Processor-generated address can be split into:</p><table id="d1cc9472-3822-448f-bcf3-34ab9306bdea" class="simple-table"><tbody><tr id="cffb8ed1-5c66-4d11-bb8d-bb6a7e156a2a"><td id="UxI?">Page Number</td><td id="TdDL">Offset</td></tr></tbody></table><p id="5dd4a3b9-168f-4078-9770-7bf1b56b67d7" class="">Space required by the page tables (PT) is proportional to the address space, number of users, ... It is too large to keep in CPU registers</p><p id="78445eb2-b9ac-4a80-b8c5-fdafee35e7dc" class="">So we&#x27;ll keep PTs in the main memory ⇒ But this requires two references for each memory access, one for retrieve the page base address and anotheer to access the data word</p><figure id="8f69b75b-f6ab-407c-a803-d4eab9c949d0" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%208.png"><img style="width:973px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%208.png"/></a></figure><p id="6d5eec47-13b0-4400-950d-e7b3deba2ecb" class="">If an instruction references a memory page that isn&#x27;t in DRAM</p><ol type="1" id="e577c044-3f98-4471-b964-158d26589eb6" class="numbered-list" start="1"><li>We get an exception of type &quot;page fault&quot;</li></ol><ol type="1" id="46d5513d-b45a-482d-8b26-ad81ad248e2a" class="numbered-list" start="2"><li>Page fault handler<ol type="a" id="51aac591-deb1-4298-9727-245d423b58c7" class="numbered-list" start="1"><li>If no unused page is available, a page currently in DRAM is selected to be replaced<ol type="i" id="3bdc045b-ab90-49f7-8416-093f85903f0d" class="numbered-list" start="1"><li>Replaced page is written to disk, PTE that maps this VPN ⇒ PPN is marked with DPN</li></ol></li></ol><ol type="a" id="713ba9a8-b688-4dea-97d5-1e3e03c7a00b" class="numbered-list" start="2"><li>Virtual page doesn&#x27;t yet exist, assign it an unused page in DRAM</li></ol><ol type="a" id="2dd48f18-0460-48b8-904d-7c1191e80157" class="numbered-list" start="3"><li>page exists but was on disk<ol type="i" id="956f3a0b-3ad6-4d35-91b1-21efe44d13f9" class="numbered-list" start="1"><li>Initiate transfer of the page contents we&#x27;re requesting from disk to DRAM, assigning to an unused DRAM page</li></ol></li></ol></li></ol><p id="4818750f-07a0-470d-a62b-b89df52d5d83" class="">
</p><hr id="668829f9-bb7c-4d9d-911d-6af895bf91f3"/><p id="da36fff5-a306-4ff7-8a98-568cb1709fdc" class=""><strong>Size of Linear Page Table</strong></p><p id="de8ba2c5-45c8-46ee-821c-4f4f2bd3f050" class="">With 32-bit memory addresses, 4KB(<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">2^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> bytes) pages ⇒ <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msup><mn>2</mn><mn>32</mn></msup><msup><mn>2</mn><mn>12</mn></msup></mfrac><mo>=</mo><msup><mn>2</mn><mn>20</mn></msup></mrow><annotation encoding="application/x-tex">{2^{32} \over 2^{12}} = 2^{20}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.36292em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01792em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">32</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">20</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> Virtual Pages per user(process), if we assume 4-Byte PTEs, <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>20</mn></msup></mrow><annotation encoding="application/x-tex">2^{20}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">20</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> PTEs, <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>22</mn></msup></mrow><annotation encoding="application/x-tex">2^{22}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> Bytes required: 4MB page table per process!</p><p id="0773bf5e-3eff-4925-9dc4-2f9d18caf327" class=""><span style="border-bottom:0.05em solid">You may think that we can make each virtual page larger?</span></p><div id="b8c40a66-2042-4ea8-8edf-f433fa9c285a" class="column-list"><div id="7368a6e5-c03e-41c4-a14f-782e3e39b01a" style="width:31.25%" class="column"><figure id="dd17887f-9fb2-4e6b-b8c3-10182db6604b" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/DCE5C1CF-3105-4B91-97A3-CB3021FFB85C.jpeg"><img style="width:1000px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/DCE5C1CF-3105-4B91-97A3-CB3021FFB85C.jpeg"/></a></figure></div><div id="2b3b37ff-66ec-4d4c-aee8-8902c4845541" style="width:68.75%" class="column"><p id="0e683b69-739d-443c-aba2-7cc2734a2a5e" class="">However, larger pages means:</p><ol type="1" id="52c011d5-7cf6-4def-970a-571bd4af5837" class="numbered-list" start="1"><li>Internal fragmentation (Not all memory in page gets used)</li></ol><ol type="1" id="999a8155-eafc-4ee5-b372-15caf073e58c" class="numbered-list" start="2"><li>Larger page fault penalty (more time to read from disk)</li></ol><p id="61a0278f-4c19-44f7-904c-9947a1d0acc7" class="">Thinking about 64-bit virtual address space, even 1MB pages would require <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>44</mn></msup></mrow><annotation encoding="application/x-tex">2^{44}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">44</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> 8-Byte PTEs (35TB)</p><p id="283efd25-762e-40ca-8952-8f6f704d98e6" class="">However, most processes only use a set of high address (stack), and a set of low address (instructions, heap)</p></div></div><p id="d4c99f8d-68fd-4a15-b38e-6b5a5c8a32ba" class="">So we will use <strong>Hierarchical Page Table</strong> ⇒ this exploits sparsity of virtual adress space use</p><figure id="f96239cd-16ef-4c5e-9270-6997dc3ab50f" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/2E45F9A9-9380-4727-8726-C9EF6763DAAE.jpeg"><img style="width:1725px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/2E45F9A9-9380-4727-8726-C9EF6763DAAE.jpeg"/></a></figure><p id="ed99d6c6-fb01-4747-9de2-4a35108d44b2" class="">
</p><hr id="80a75cfc-2292-4881-a3a1-160fff8008d4"/><p id="1bb17c64-07a2-4336-aebe-d5070576474c" class=""><strong>Cost of Virtual Memory</strong></p><div id="194f4646-54c9-43a0-9ac7-ce367127dd27" class="column-list"><div id="d8b3d884-851e-480c-ad97-be2e9a447f42" style="width:75%" class="column"><figure id="e6970513-3a2f-40b9-8d9c-73130864ea33" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/7F508771-C2FD-42DE-8D0F-17F1DC2D3154.jpeg"><img style="width:1484px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/7F508771-C2FD-42DE-8D0F-17F1DC2D3154.jpeg"/></a></figure></div><div id="27bc6fe7-535c-4e02-87a1-1714cc3cbcf1" style="width:24.999999999999993%" class="column"><p id="86600985-d06a-4577-880f-54499ea804b3" class="">There&#x27;s a cost to virtual memory, namely the price of <strong>Address Translation &amp; Memory Protection</strong></p><p id="549a617d-4edd-4e93-8e14-1c17ee34cfa8" class="">Address translation is very expensive as in a two-level page table, each reference becomes several memory accesses.</p></div></div><p id="de4c461a-e427-4889-837c-d7e13a8b3f17" class="">To account for the inefficiencies of address translation, we introduce <strong>Translation Lookaside Buffers (TLB)</strong> that caches some translations</p><ol type="1" id="96c339e1-9fb7-435f-92d5-7542411bf5b5" class="numbered-list" start="1"><li>For a single TLB hit, we will now only have address translation that costs <strong>one cycle</strong></li></ol><ol type="1" id="516e869e-1e6e-425c-a952-7759b2ee0208" class="numbered-list" start="2"><li>For a TLB miss, we will need a Page-Table walk to get the physical address as well as to refill the TLB table.</li></ol><p id="e9bb82e8-0834-484e-bca4-cc2ebbe82ab3" class="">
<strong>TLB Reach</strong> = Size of largest virtual address space that can be simultaneously mapped by TLB</p><p id="7bb3dea5-58eb-4a90-a21d-e72271dc1da8" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>e</mi><mi>a</mi><mi>c</mi><msub><mi>h</mi><mrow><mi>T</mi><mi>L</mi><mi>B</mi></mrow></msub><mo>=</mo><msub><mi mathvariant="normal">#</mi><mrow><mi>e</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>×</mo><mi>S</mi><mi>i</mi><mi>z</mi><msub><mi>e</mi><mrow><mi>p</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow></msub><mo>×</mo><mfrac><msub><mi mathvariant="normal">#</mi><mrow><mi>p</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi></mrow></msub><mrow><mi>e</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>y</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">Reach_{TLB} = \#_{entries} \times Size_{page} \times {\#_{pages} \over entry}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">#</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">es</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.474536em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.993428em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ry</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.50732em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">#</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285716em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">es</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span></p><p id="704c2e35-06c8-4f19-b836-1a3657d2a776" class="">
</p><hr id="ba90ab50-e0a6-4a96-8f02-700707decc34"/><p id="5829a6b8-56d0-4616-be82-fc34f833e4b9" class=""><strong>TLB Designs</strong></p><ol type="1" id="b244885f-7a9c-42db-a30d-7ebfd97b0e99" class="numbered-list" start="1"><li>Typically 32-128 entries</li></ol><ol type="1" id="0d4095d1-517e-425d-95f8-fad3ae2813db" class="numbered-list" start="2"><li>Each entry maps a large page<ol type="a" id="ad7ec7de-1500-425d-8121-1c7c4059edd5" class="numbered-list" start="1"><li>So less spatial locality across pages</li></ol></li></ol><ol type="1" id="36783a10-5cde-47e9-ae53-4d5ebe20c478" class="numbered-list" start="3"><li>Sometimes fully associative, larger TLBS(256-512 entries) are 4-8 way set-associative</li></ol><ol type="1" id="9c1ece33-d609-431b-bf74-f4e9688e8873" class="numbered-list" start="4"><li>Larger systems sometimes have multi-level (L1, L2) TLBs</li></ol><ol type="1" id="fc6dfac9-cb12-4141-8f00-a34ddcf53bee" class="numbered-list" start="5"><li>Random or FIFO(First-In-First-Out) replacement policy</li></ol><ol type="1" id="fb853e87-6dcb-44eb-a141-c8c93ccfa1c2" class="numbered-list" start="6"><li>Two styles of refill<ol type="a" id="b97a23c7-f052-4ad4-a856-64a62d3f83b6" class="numbered-list" start="1"><li>MIPS style<ol type="i" id="cf0ce8b1-af31-412b-9e02-81b36bbb7452" class="numbered-list" start="1"><li>The TLB is the only translation in the hardware</li></ol><ol type="i" id="635717ee-bb43-401b-9baf-c4c2d8c09553" class="numbered-list" start="2"><li>Whenever you get a TLB miss you jup to the page fault handler</li></ol></li></ol><ol type="a" id="c7302c44-0601-43dd-98d9-3cc64e6f14d4" class="numbered-list" start="2"><li>x86<ol type="i" id="4de44ff4-9ecc-435b-96c1-c8477f487f5c" class="numbered-list" start="1"><li>The page table has a defined structure</li></ol><ol type="i" id="458c8f6e-1c83-4c9f-95ea-badfedabc782" class="numbered-list" start="2"><li>In the event of a TLB miss the hardware walks the page table<ol type="1" id="4fd32616-89bf-420e-b8aa-a862192f1b19" class="numbered-list" start="1"><li>Only if the page is unavailable you jump to the page fault handler</li></ol></li></ol></li></ol><ol type="a" id="faf1c8c2-4eb5-4e0d-8fe4-d318bbee8536" class="numbered-list" start="3"><li>RISCV Prefers x86 style, but is compliant with MIPs</li></ol><p id="c58d5b64-42e6-48e0-9b3e-da9d58cea229" class="">
</p></li></ol><p id="448aa2f7-6fc8-4485-886e-12f154a7e33a" class=""><strong>Finished TLB workflow</strong></p><figure id="c0c949ef-be0f-48d2-9802-6c1a30bfefd4" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/5497109B-D178-467A-A803-C2089A1CCA16.jpeg"><img style="width:1965px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/5497109B-D178-467A-A803-C2089A1CCA16.jpeg"/></a></figure><p id="70c90667-bde0-4332-8f94-34b7695450bd" class="">
</p><hr id="fa36db2e-fde1-438a-bd41-505a926e7d32"/><p id="77340d70-788d-42fa-8b3c-3f196e998bc8" class=""><strong>Some Virtual Memory Tricks</strong></p><ol type="1" id="9624f622-e725-467d-a490-e17cc6418bf4" class="numbered-list" start="1"><li>Copy-On-Write Duplication<ol type="a" id="a7b44479-7971-48a3-a315-29bf782dc353" class="numbered-list" start="1"><li>Split a process and now have two processes (fork)</li></ol><ol type="a" id="77f88870-9918-412e-b5bb-d5b844bc25d0" class="numbered-list" start="2"><li>Copy the page table and registers<ol type="i" id="51fbf752-5143-4818-b76c-cb6475863681" class="numbered-list" start="1"><li>and mark both the original and copy&#x27;s memory as read-only</li></ol></li></ol><ol type="a" id="c3309ed1-ff64-4754-87c1-5f560e291d8c" class="numbered-list" start="3"><li>Every time either process wants to write a page...<ol type="i" id="31c6a9bf-6e4f-49c2-8505-3710f18213a2" class="numbered-list" start="1"><li>Traps to the protection fault handler</li></ol><ol type="i" id="8efb0570-f44f-4c25-81fb-f8d2006ab753" class="numbered-list" start="2"><li>The fault handler copies the page, and updates both page-tables to allow writing</li></ol></li></ol><ol type="a" id="32ba26ef-812d-4d2a-92e0-56bc2123692c" class="numbered-list" start="4"><li>And now we only copy memory when we need to first write it.</li></ol></li></ol><ol type="1" id="c15ebb66-3bdc-4821-a01c-fe746f31d5f4" class="numbered-list" start="2"><li>Shared Dynamically Linked Libraries<ol type="a" id="9026883e-e4b2-445e-83d5-544afef9f0b0" class="numbered-list" start="1"><li>Two virtual PTE pointed to the same physical memory space</li></ol></li></ol><ol type="1" id="dc1e00bc-22b2-4cff-9f4c-c355cd51c0fd" class="numbered-list" start="3"><li>Memory Mapped File<ol type="a" id="afd867ef-f087-4521-a326-835c2775ebbc" class="numbered-list" start="1"><li>&quot;Load the entire file into a contiguous block of memory&quot;</li></ol><ol type="a" id="ffbf4cfa-276c-4d8e-b661-d4c91d92744c" class="numbered-list" start="2"><li>The system just points the PTE to disk ⇒ when the program actually reads, generates a page fault to OS and OS loads the page into memory</li></ol></li></ol><ol type="1" id="739acd9d-b690-4736-8e23-dac6cea7315a" class="numbered-list" start="4"><li>Dirty bit in PTE<ol type="a" id="cb269ac1-b1e2-4615-8e6e-d0223265b63e" class="numbered-list" start="1"><li>Need to swap out the page, then if it is dirty write it out</li></ol></li></ol><h2 id="0b6758f8-0268-4854-9f3a-f3052a49ea98" class="">RISC-V</h2><p id="2f879409-046f-457b-9315-53fa0d99b912" class="">Simpel RISC-V RV32I Datapath Diagram (From CS61C Fall 21 Slides)</p><figure id="6962c6c5-220f-4899-9560-69576d711c06" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%209.png"><img style="width:1366px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/Untitled%209.png"/></a></figure><p id="e3019276-9626-402b-a504-5077795e500b" class="">
</p><p id="8d77c1f8-3641-4d54-9c17-c24b1c15830a" class="">Some Good Material...</p><figure id="6e6a7107-16d3-47f0-b373-5ee808fb9247"><a href="https://inst.eecs.berkeley.edu/%7Ecs61c/resources/riscvcard.pdf" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title"></div></div><div class="bookmark-href">https://inst.eecs.berkeley.edu/%7Ecs61c/resources/riscvcard.pdf</div></div></a><figcaption>RISC-V Card (Official Cheatsheet Provided by CS61C Staff)</figcaption></figure><p id="bb101185-f5a0-48fa-9dc1-71815301d873" class="">
</p><h3 id="81f3f428-7ea9-4b14-aac6-f8e4377b15b6" class="">Assembly Language</h3><blockquote id="e7a15aeb-9578-4965-9d2c-7cf890f0e646" class="">Immediates are &quot;sign-extended&quot;</blockquote><h3 id="567e5e36-788a-4dfd-baa9-792832780a68" class="">Calling Convention</h3><p id="15537e5e-924b-4fbe-a18f-991146025fea" class="">Two types of registers in calling convention</p><ol type="1" id="6e8583cf-0a53-4c06-bec7-04afff3773ba" class="numbered-list" start="1"><li>Callee saved ⇒ The function that gets called saves it at the beginning and restores before returning</li></ol><ol type="1" id="36ed62c9-e086-494d-8c2e-4e3b9baa9e6f" class="numbered-list" start="2"><li>Caller saved ⇒ The function that gets called do whatever it wants with this register, the function that calls was responsible for storing it before calling and restoring it after calling.</li></ol><h2 id="77475c3c-2a7c-4856-9b0a-86894800b25c" class="">CALL(Compiler ⇒ Assembler ⇒ Linker ⇒ Loader)</h2><h3 id="8f68b722-ed97-4572-90f0-79ddf12e54ad" class="">Compiler(CS164) ⇒ Most Computationally Heavy in the CALL chain</h3><p id="3586e7f5-0152-4243-bf75-6e86eab73557" class="">Higher-Level Language Code (foo.c) ⇒ Assembly Language Code (foo.s)</p><p id="4c62dd01-7c72-44eb-a409-82c5f3bf52b0" class="">Code Matches Calling Convention for the architecture.</p><p id="f04db9b0-98d7-4398-a684-6532ae9f5a4b" class="">Output may contain pseudo-instructions</p><ol type="1" id="1ff14dc4-125b-4013-9884-10d9da10e110" class="numbered-list" start="1"><li>Lexer: Transforms input ⇒ tokens</li></ol><ol type="1" id="14dc6cd7-7535-4ee9-8860-49c24280b529" class="numbered-list" start="2"><li>Parser: Tokens ⇒ Abstract Syntax Tree</li></ol><ol type="1" id="4a7d3df2-4978-4a05-ac0b-e144e09d6cac" class="numbered-list" start="3"><li>Semantic Analysis and Optimization: Checks for semantic errors (语义错误), may reorganize code to make it better.</li></ol><ol type="1" id="22b3f33d-ae3b-4fd3-ba9d-abc74760f620" class="numbered-list" start="4"><li>Code Generation: Outputs the assembly code</li></ol><h3 id="047f00f4-1842-4781-af57-e97cdcd95092" class="">Assembler: dumb compiler for assembly language</h3><p id="a21c94a3-04a9-4ab2-b007-365e6137a248" class="">Assembly Language Code (foo.s) ⇒ Object Code, Information Tables (foo.o)</p><table id="4609fa72-81fc-43b2-9acd-04392465bc57" class="simple-table"><tbody><tr id="32487c71-00fe-4538-ae53-5f3bfa94923e"><td id="`yq\">Assembler Directive</td><td id="{mV~">Description</td></tr><tr id="ef2ff632-dede-417a-9d70-ace3b5213a02"><td id="`yq\">.text</td><td id="{mV~">Subsequent items put in user text segment (machine code)</td></tr><tr id="6a725ed0-e27d-4e18-abb4-c92fd7413ed2"><td id="`yq\">.data</td><td id="{mV~">Subsequent items put in user data segment (binary rep of data in source file)</td></tr><tr id="5cf116c1-1c40-4e5f-b7e5-1c287edbbca3"><td id="`yq\">.globl sym</td><td id="{mV~">declares sym global and can be referenced from other files</td></tr><tr id="5f230d23-17f6-4c33-b619-3aa79fa53aea"><td id="`yq\">.string str</td><td id="{mV~">Store the string str in memory and null-terminate it</td></tr><tr id="7e918c04-d516-45ed-bd7a-aa3f073ccfe7"><td id="`yq\">.word w1.....wn</td><td id="{mV~">store the n 32 bit quantities in successive memory words</td></tr></tbody></table><ol type="1" id="866ca5ed-e6d5-461c-bc55-b3290c51af87" class="numbered-list" start="1"><li>Reads and uses <strong>Directives</strong></li></ol><ol type="1" id="71a432e8-b0ad-4891-84f9-0bdb3caa44f4" class="numbered-list" start="2"><li>Replaces Pseudo-instrutions</li></ol><ol type="1" id="4633f77f-00bb-4b00-8035-9e4ac4f472af" class="numbered-list" start="3"><li>Produces Machine Language rather than just Assembly Language</li></ol><ol type="1" id="dfec7c8e-b5c1-4e50-899b-535016279730" class="numbered-list" start="4"><li>Outputs Object File</li></ol><p id="d162d452-d326-4858-b821-1947d4ce785b" class="">
</p><p id="1a94d5cf-58b3-4128-bdd6-49489e6f8cff" class="">Tail call optimization</p><pre id="84d92455-3b02-4b58-bf41-a781e715ff10" class="code"><code>int doSth(){
	....//lots of code
	return foo(y);
}</code></pre><ol type="1" id="d09bbb10-216c-45cb-9fa8-aa363203df13" class="numbered-list" start="1"><li>For efficiency, evaluate the arguments for foo() and place them in a0-a7</li></ol><ol type="1" id="605bd95b-5ec8-467b-afb2-cebc659e39b5" class="numbered-list" start="2"><li>Restore ra, all callee saved registers, and sp</li></ol><ol type="1" id="89684ccd-14b6-4e23-96ca-6d19108e3aaa" class="numbered-list" start="3"><li>call foo() with j or tail</li></ol><ol type="1" id="a8582ec2-17b5-4bd8-bffa-12ad48f4588e" class="numbered-list" start="4"><li>foo() will return directory to where doSth needs to return to</li></ol><p id="8e4b1bb4-8e7b-4b4c-9264-d04e4da47431" class="">
</p><p id="aabb2b0a-e3ce-4d9b-868f-8201bfe558cb" class=""><strong>Forward Reference Problem</strong></p><p id="a67f40be-f29b-436c-84d2-76fba954f400" class="">Branch instructions can refer to labels that are &quot;forward&quot; in the program</p><pre id="c3911959-4712-4765-868e-67392295c650" class="code"><code>L1:
slt t0, x0, $a1
beq t0, x0, L2
addi a1, 1, -1
jal x0, L1
L2:
add $t1, $a0, $a1</code></pre><p id="d8ef271a-1bb4-4aa3-8d92-bf681f812585" class="">Solved by taking 2 passes over the program</p><ol type="1" id="923c040b-8f48-4936-a265-6303e49dbcbd" class="numbered-list" start="1"><li>First pass remembers positions of labels</li></ol><ol type="1" id="e096657d-9ae3-4c04-81f7-6a2113eaad15" class="numbered-list" start="2"><li>Second pass uses label positions to generate code</li></ol><p id="1ca31ceb-7ee7-4e6d-9299-00cd557046ca" class="">
</p><p id="ffc8d769-ec57-4993-ad83-ea52664a37ed" class="">We solved the forward refering problem(branch), but we might be referencing libraries outside of current file(jumps, static data addresses), so how do we account for these?</p><p id="b821c15e-71a3-4a2b-9b11-4ee6bbf72185" class=""><strong>Symbol Table</strong></p><p id="5960b397-f7dc-4c06-a9b9-a7520a85571f" class="">contains List of &quot;items&quot; in this file that may be used by other files</p><p id="37380650-74d6-4c2c-b93c-15fc531d1d92" class="">items include:</p><ol type="1" id="1989ee08-45d6-4e13-8a33-e7a4e59f9633" class="numbered-list" start="1"><li>Labels for function calling</li></ol><ol type="1" id="d30d536d-9740-4ff5-b04d-d634ab0aa774" class="numbered-list" start="2"><li>Data: anything in the .data sections and variables which may be accessed across files</li></ol><p id="a7961512-c892-45b9-bd8f-14d6c6bd1fdf" class=""><strong>Relocation Table</strong></p><p id="6da73351-5097-4af2-8292-93319973941a" class="">List of &quot;items&quot; this file needs the address of later</p><ol type="1" id="a5c23354-ba3d-4558-b556-c6b83c4b45a6" class="numbered-list" start="1"><li>External label jumped to</li></ol><ol type="1" id="5f452dd4-55f5-4ccc-ac95-c3d597407319" class="numbered-list" start="2"><li>Any piece of data referenced by static loading, such as la</li></ol><p id="5de53e63-336b-4d7f-8be9-19e06ac70a30" class=""><strong>Object File Format (Standard Format is ELF, except for Microsoft)</strong></p><ol type="1" id="dca8a880-5e1e-40b8-8f99-6271a916651a" class="numbered-list" start="1"><li>Object file header: size and position of the other pieces of the object file</li></ol><ol type="1" id="c14fc840-fb2b-4902-b480-a5f6f9f99bbe" class="numbered-list" start="2"><li>Text segment(<code>.text</code>): the machine code</li></ol><ol type="1" id="ff0f701b-28cf-46d3-94be-c98b6a0a4c1d" class="numbered-list" start="3"><li>Data segment(<code>.data</code>): binary representation of the static data</li></ol><ol type="1" id="98f94f8a-4128-4f73-8130-3e0ef7757586" class="numbered-list" start="4"><li>Relocation Information: <mark class="highlight-gray_background">identifies lines of code that need to be fixed up later</mark></li></ol><ol type="1" id="ec3f0f3d-0a13-46c9-92b6-e7282248b02e" class="numbered-list" start="5"><li>Symbol Table</li></ol><ol type="1" id="a4fee59d-e3a8-48de-ba0c-99a58dd7ca4f" class="numbered-list" start="6"><li>Debugging Information</li></ol><h3 id="06b3b699-c5e4-42bd-866a-5911edd55b8c" class="">Linker</h3><p id="ebd2aea6-22b3-4e29-a70a-628f2629a749" class="">Object code files with information tables (foo.o, libc.o) ⇒ Executable code (a.out)</p><ol type="1" id="1547cf2d-0347-4b07-81f2-015efea35c68" class="numbered-list" start="1"><li>Combines several object files into a single executable</li></ol><ol type="1" id="e4e4f1d9-f8dc-4008-b9f1-ef70bb91c1a2" class="numbered-list" start="2"><li>Enables seperate compilation of files so that changes to one file do not require recompilation of the whole program</li></ol><p id="d7e00d61-04a3-4986-a419-599d650ab6ee" class="">Steps:</p><ol type="1" id="4cf94c7e-9cdd-4c10-b10b-0d842ce760de" class="numbered-list" start="1"><li>Take text segment from each .o file and put them together</li></ol><ol type="1" id="2cf3002f-c11d-4b33-b131-d0984c9c500c" class="numbered-list" start="2"><li>Take data segment from each .o file and put them together, concatenate this to end of text segments</li></ol><ol type="1" id="43d34b2c-a53a-478a-998c-121c55a28797" class="numbered-list" start="3"><li>Resolve References<ol type="a" id="557aed5b-8e9a-4279-b883-2975dae412c8" class="numbered-list" start="1"><li>Linker assumes first word of first text segment is at 0x04000000 (virtual memory)</li></ol><ol type="a" id="84494ccc-20cc-42a7-9afe-bb454a890cac" class="numbered-list" start="2"><li>It knows:<ol type="i" id="5a8f4999-8c4b-4bf1-8a8b-fb5aca8a5dfb" class="numbered-list" start="1"><li>length of each text and data segment</li></ol><ol type="i" id="5f6ff353-eb6b-4718-82f2-cb95f990f3e2" class="numbered-list" start="2"><li>ordering of text and data segments</li></ol></li></ol><ol type="a" id="289c263c-afac-4081-839d-f482dc865f33" class="numbered-list" start="3"><li>It calculates:<ol type="i" id="9342c4fc-537d-4fea-bf61-323a233bc2bc" class="numbered-list" start="1"><li>absolute address of each label and each piece of data being referenced</li></ol></li></ol><ol type="a" id="6a5cd31d-8231-4312-a76c-0dd0b4bb32c1" class="numbered-list" start="4"><li>To resolve,<ol type="i" id="c2a64e03-0c94-472d-b735-a4c666061285" class="numbered-list" start="1"><li>It searches for reference in all &quot;user&quot; symbol tables</li></ol><ol type="i" id="cce1f225-3992-4e70-8b52-dede6549e0fd" class="numbered-list" start="2"><li>If not found, search library files</li></ol><ol type="i" id="8ae43174-1f3c-4e51-bc87-d1fe6228da30" class="numbered-list" start="3"><li>Once absolute address is determined, fill in the machine code appropriately</li></ol></li></ol></li></ol><h3 id="976d677c-9036-4ca4-a553-b8e06694330a" class="">Loader</h3><p id="3ab31a1c-0be3-4845-8a67-aac1b4716c63" class="">Load program into memory and kickstart the program. (usually implemented by OS)</p><ol type="1" id="5432b258-cdd4-4859-ac36-e56ce152fb08" class="numbered-list" start="1"><li>Reads executable header and determines size of text and data</li></ol><ol type="1" id="283476e6-43dc-4954-9d66-7e8ad8b33c3c" class="numbered-list" start="2"><li>Creates new address space for program large enough to hold text and data segments, as well as stack segment</li></ol><ol type="1" id="395adb15-772b-45e3-a620-43af24c220a7" class="numbered-list" start="3"><li>Copy instructions and data from file into the new address space</li></ol><ol type="1" id="8ed71854-7728-4a44-af74-ad6f38a79382" class="numbered-list" start="4"><li>Copies arguments passed to the program onto the stack</li></ol><ol type="1" id="90c1368a-8cf7-4722-ba71-f9bed62cef08" class="numbered-list" start="5"><li>Initializes machine registers<ol type="a" id="86f182c6-035a-4182-8afe-a599af4aaacf" class="numbered-list" start="1"><li>Most registers cleared, but stack pointer assigned address of 1st free stack location</li></ol></li></ol><ol type="1" id="9c307fe6-c5f4-43fe-9858-94bb3eceb1b0" class="numbered-list" start="6"><li>Jumps to start-up routine that copies program&#x27;s arguments fro stack to registers &amp; sets the PC</li></ol><ol type="1" id="3e9f66d2-dfef-487f-aa28-c8a3f3a7e23f" class="numbered-list" start="7"><li>If main routine returns, start-up routine terminates program with the exit system call</li></ol><ol type="1" id="cfeeaebc-c9f9-41e6-8c65-bdb26e9db7a2" class="numbered-list" start="8"><li>Also responsible for linking dynamically linked libraries(DLL)</li></ol><p id="4581acab-80fe-4009-a2a2-886b6d4e6af6" class="">
</p><p id="b5807729-8b97-4abe-98d3-8ba29a7dcfc4" class="">Dynamically Linked Libraries</p><ol type="1" id="5bc2cb69-5c3b-4bdf-b8d8-90e712709352" class="numbered-list" start="1"><li>Storing a program requires less disk space</li></ol><ol type="1" id="6b2677b1-a47a-4ecb-a060-6589daa87d84" class="numbered-list" start="2"><li>Executing two programs requires less memory (if they share a library)</li></ol><ol type="1" id="a8354b56-9a65-4a02-b9d5-b740bdc9b3a9" class="numbered-list" start="3"><li>At runtime, there&#x27;s time overhead to do link</li></ol><p id="c1763148-5cc4-49e5-8b53-d753e63908d0" class="">
</p><h2 id="f1228889-87d1-4619-9b2a-ea27252cbec8" class="">Parallelism</h2><h3 id="a1d65da1-7895-499a-bc18-f5c0f0a2647d" class="">Calculating Speedup</h3><p id="c87c18bd-83b6-4c96-9cc6-17b0ddd58433" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>u</mi><msub><mi>p</mi><mrow><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>n</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>T</mi><mi>i</mi><mi>m</mi><msub><mi>e</mi><mrow><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>n</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow></msub></mrow><mrow><mi>T</mi><mi>i</mi><mi>m</mi><msub><mi>e</mi><mrow><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>n</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">Speedup_{with\_enhancement} = {Time_{without\_enhancement} \over Time_{with\_enhancement}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.06144em;vertical-align:-0.367em;"></span><span class="mord mathnormal">Sp</span><span class="mord mathnormal">ee</span><span class="mord mathnormal">d</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">nhan</span><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6550509999999998em;vertical-align:-0.6058599999999998em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.049191em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">im</span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">nhan</span><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3726571428571428em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.57086em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">im</span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">t</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">nhan</span><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3726571428571428em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6058599999999998em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span></p><p id="74dbe3cb-b8c6-46e9-be0f-1e673df97520" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>i</mi><mi>m</mi><msub><mi>e</mi><mrow><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>n</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow></msub><mo>=</mo><mi>T</mi><mi>i</mi><mi>m</mi><msub><mi>e</mi><mrow><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>n</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow></msub><mo>×</mo><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>F</mi><mo stretchy="false">)</mo><mo>+</mo><mi>F</mi><mi mathvariant="normal">/</mi><mi>S</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Time_{with\_enhancement} = Time_{without\_enhancement} \times [(1-F) + F/S]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.05033em;vertical-align:-0.367em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">im</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">nhan</span><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.05033em;vertical-align:-0.367em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">im</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">t</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">nhan</span><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">]</span></span></span></span></span><span>﻿</span></span></p><p id="b0ff8054-f12c-4fea-997a-87c3da671cdf" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>u</mi><msub><mi>p</mi><mrow><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>n</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>F</mi><mo stretchy="false">)</mo><mo>+</mo><mi>F</mi><mi mathvariant="normal">/</mi><mi>S</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Speedup_{with\_enhancement} = 1/[(1-F) + F/S]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.06144em;vertical-align:-0.367em;"></span><span class="mord mathnormal">Sp</span><span class="mord mathnormal">ee</span><span class="mord mathnormal">d</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">nhan</span><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mopen">[(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">]</span></span></span></span></span><span>﻿</span></span></p><p id="55488362-95c9-4046-83a0-6bb4f11e6102" class="">F = fraction of the task that got affected</p><p id="d24df657-4066-47d0-bd06-a664400fe482" class="">S = Speedup factor for the fraction of the task that is affected</p><h3 id="ff1a0580-6770-4e18-b97f-4428f4cb8d10" class="">Amdahl&#x27;s Law</h3><p id="29412520-e0aa-4fee-abf8-e3143ac871dd" class="">If the portion of the program that can be parallelized is small, then the speedup is limited</p><figure id="54f3a318-a4aa-4d27-8513-2a6daa1872f0" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3E603E72-E94D-45E5-B43C-75BEFB9381D2.jpeg"><img style="width:1443px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3E603E72-E94D-45E5-B43C-75BEFB9381D2.jpeg"/></a></figure><h3 id="b752c6eb-7b55-4575-af6d-08a1767ce770" class="">Strong and Weak Scaling</h3><p id="0e4f4f5b-f8b8-4943-b427-192c75863b18" class="">To get a good speedup on a parallel processor while keeping the problem size fixed is harder than getting good speedup by increasing the size of the problem</p><p id="d6bf1e01-6faa-4272-9666-50c21affd0af" class=""><mark class="highlight-gray_background">Strong scaling</mark>: when speedup can be achieved on a parallel processor without increasing the size of the problem</p><p id="9dd367e6-f01c-4362-95ee-776f91bbe819" class=""><mark class="highlight-gray_background">Weak scaling</mark>: when speedup is achieved on a parallel processor by increasing the size of the problem proportionally to the increase in the number of processors</p><p id="27db90f3-065e-4952-bd56-8ca5209619b2" class="">It is always important to <strong>get things right and then optimize </strong>because your runtime of the program is really time to code it + time to run it on the manchine.</p><p id="187e5ba7-bf64-478b-a47f-c4ca8bb4ccec" class="">
</p><h3 id="9c1a97b0-a364-4825-9c4e-b0f3fc79c446" class="">Data Level Parallelism</h3><p id="9679e3e5-aa5a-4c31-9e2c-667080cd4b2b" class="">Increases Throughput</p><div id="ff1894d4-b1c9-46b5-a0dd-11e053548aa1" class="column-list"><div id="a56c8a9e-e557-4028-aa39-622c7ddf870b" style="width:50%" class="column"><p id="be87da70-2f0f-48e3-bdbc-9a3cd0e40108" class=""><strong>Single-Instruction/Multiple-Data Stream ⇒ SIMD</strong></p><ol type="1" id="3390f9cc-7b2f-45aa-8afd-ccd22fd3408c" class="numbered-list" start="1"><li>Processes multiple data streams using a single instruction stream</li></ol><ol type="1" id="b6b649ce-a0dd-442c-95a3-bd49ea21fc9a" class="numbered-list" start="2"><li>Intel SIMD instruction extensions / GPU</li></ol><ol type="1" id="7ca59977-be89-4d96-b9ff-0acc75d7b20a" class="numbered-list" start="3"><li>Higher throughput per $<ol type="a" id="d8b84431-77a1-4881-aeef-f6f7124cc7f3" class="numbered-list" start="1"><li>Much simpler control logic</li></ol></li></ol><ol type="1" id="c3697186-3db9-4f23-b55d-eff2af45486f" class="numbered-list" start="4"><li>Easy to map to MIMD</li></ol><ol type="1" id="5f093d25-4367-4d7c-9aa2-7abc931e236f" class="numbered-list" start="5"><li>Requires less memory since there&#x27;s less instructions</li></ol><ol type="1" id="3de524b6-a375-4812-b0ea-f1e63fb6f169" class="numbered-list" start="6"><li>Less cost per unit</li></ol><ol type="1" id="d1449b00-d106-4538-88a7-5a4e2fd34c29" class="numbered-list" start="7"><li>1 Instruction Decoder</li></ol><ol type="1" id="ccaf4352-e10a-4f28-8ac2-f30285d0c650" class="numbered-list" start="8"><li>Less Complexity</li></ol><ol type="1" id="f8834f65-13d9-4d56-a7bb-cb35663eefc3" class="numbered-list" start="9"><li>Latent/Tacit Synchronization</li></ol><p id="54f11d42-c394-4e95-8d15-5dd640b66b91" class="">
</p></div><div id="14c75099-0301-40d1-8ccf-1f87309702f6" style="width:50%" class="column"><p id="73c77899-75bd-4c2e-9054-a1a523fb2d3e" class=""><strong>Multiple-Instruction/Multiple-Data Streams ⇒ MIMD</strong></p><ol type="1" id="9ad8c580-2b46-4b38-8f5e-b49dc35b136e" class="numbered-list" start="1"><li>Multiple autonomous processors simultaneously executing different instructions on different data</li></ol><ol type="1" id="a0a3ef81-8fb1-470a-a89d-5a9a6962d74e" class="numbered-list" start="2"><li>multicore / warehouse-scale computers</li></ol><ol type="1" id="954d6916-303e-41ba-99f1-667bedd1b33b" class="numbered-list" start="3"><li>Lower throughput per $</li></ol><ol type="1" id="4bff0d61-0146-44e0-bb00-27de82d01904" class="numbered-list" start="4"><li>VERY hard to map to SIMD</li></ol><ol type="1" id="7d29af10-5811-4dc1-8af9-527fcde6d0a5" class="numbered-list" start="5"><li>Requires more memory since there&#x27;s more instructions</li></ol><ol type="1" id="9e780581-03a1-4da1-aeed-cc1d9f95ef8e" class="numbered-list" start="6"><li>More cost per unit</li></ol><ol type="1" id="86cdda12-7e43-44f2-90b1-15a35f1912c4" class="numbered-list" start="7"><li>2+ Instruction Decoder</li></ol><ol type="1" id="3ff49893-0845-44ed-93f7-3489fb89cc73" class="numbered-list" start="8"><li>More complexity</li></ol><ol type="1" id="def79ca7-9318-4f34-9947-2b3e97d047c1" class="numbered-list" start="9"><li>Accurate or Explicit Synchronization</li></ol></div></div><p id="7a1fc173-6ca4-4227-b8d3-6d6849718c59" class=""><strong>Loop Unrolling</strong></p><p id="04971e8b-eea0-472e-be33-461c6c886794" class="">Optimizing compilers usually perform this job.</p><ol type="1" id="e89ab94e-6f25-4efb-acb6-873961700912" class="numbered-list" start="1"><li>Expose data-level parallelism for vector(SIMD) instructions or super-scalar multiple instruction issue</li></ol><ol type="1" id="9dde557d-a6fc-4887-933e-926be3aa45a8" class="numbered-list" start="2"><li>Mix pipeline with unrelated operations to help with reduce hazards</li></ol><ol type="1" id="0f0bdee2-59ef-4dff-bb12-c7dd819eca55" class="numbered-list" start="3"><li>Reduce loop &quot;overhead&quot;</li></ol><ol type="1" id="b7099629-98d0-481c-a4aa-ecfe2b5aff21" class="numbered-list" start="4"><li>But also... makes code size larger</li></ol><p id="1ddd5986-65e1-4055-aa04-4eca63067bc7" class="">
</p><h3 id="52c7b093-c648-412a-a679-7085e74a65cc" class="">Thread Level Parallelism</h3><p id="a9835d37-5782-4b24-87ad-21e7359bd219" class="">Thread ⇒ A sequential flow of instructions that performs some task</p><p id="5fd4612d-0e7c-41ba-8d77-09d19fafc0a9" class="">Each core provides one or more(superscalar) <strong>hardware threads</strong> that actively execute instructions</p><p id="9eece0d5-3181-49fd-8c97-4e0e224a51a9" class="">Operation system multiplexes multiple <strong>software threads</strong> onto the available <strong>hardware threads</strong></p><p id="369d3c63-23b4-4656-9fac-e4df5af82502" class="">
</p><p id="8f61d189-32a2-448e-b6c1-c9a14dac5c7d" class=""><strong>HyperThreading</strong></p><p id="4ab549b3-0352-4571-afdb-076a9123c5e6" class="">Processor resources are  expensive and should not be left idle</p><p id="7b3d344f-44e8-440f-9af2-1fb273b819de" class="">Hardware swithces threads to bring in other useful work while waiting for cache miss</p><p id="920494ba-52cd-432f-ba63-42a12df01ffa" class="">So we can put in redundant hardware ⇒ don&#x27;t have to save context on every thread switch</p><p id="3ff6faec-f5ac-478c-9aec-9fe099c56c75" class="">This is attractive for apps with abundant TLP (Thread-level Parallelism)</p><p id="467cafab-ea31-43ca-8f37-5b8e679c49d2" class="">
</p><p id="fb3053fd-f5b5-4670-8465-c9983bf3e82f" class=""><strong>Data Race</strong></p><p id="817ad588-2132-4d80-8bcb-af207239cc9e" class="">Two memory accesses of the same location from different threads, of which least least one is a write form a data race</p><p id="18132270-dd6a-4245-8e8a-1e8430805738" class="">So we&#x27;ll use &quot;Lock&quot; to grant access to a region (critical section)</p><figure id="ef429889-0087-4b7e-96b4-4b444a56ef92" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/FB2F9B62-2C42-4A98-83F2-5F39FAB0F767.jpeg"><img style="width:2120px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/FB2F9B62-2C42-4A98-83F2-5F39FAB0F767.jpeg"/></a></figure><div id="dce132c4-d914-4f90-a16b-d470b8b26e79" class="column-list"><div id="9b4614c9-06f6-40f3-b0c1-c813206d7f7b" style="width:18.75%" class="column"><figure id="19e8fc77-ca91-4449-a6f4-78066a39af9b" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/8342A164-37CC-421D-8A92-4F55ADDB0961.jpeg"><img style="width:443px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/8342A164-37CC-421D-8A92-4F55ADDB0961.jpeg"/></a></figure></div><div id="720143e4-6a44-48a8-b007-6a80193144dc" style="width:81.25%" class="column"><p id="6ea9e290-3756-4c60-9654-3bbdc2e56a19" class="">Test-and-Set</p><p id="66c5ca1b-f6dd-44f3-89d5-86eb228f401c" class="">In a single atomic operation:</p><ol type="1" id="c290c461-abc8-49cf-9cb0-8095589865ea" class="numbered-list" start="1"><li>Test to see if a memory location is set (contains 1)</li></ol><ol type="1" id="14167431-fbb7-4e91-a332-29b3805e28c3" class="numbered-list" start="2"><li>Set it (to 1) if it isn&#x27;t (it contained a zero when tested)<ol type="a" id="c3689a43-468b-442a-9c52-e6f3fe72983c" class="numbered-list" start="1"><li>Otherwise indicate that the Set is failed, so the program can try again</li></ol></li></ol></div></div><figure id="74495c22-75cb-4b7f-9d46-61fc025ba0c6" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/89D65D50-B9CE-45B2-98DA-F49F9B1B70AF.jpeg"><img style="width:2068px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/89D65D50-B9CE-45B2-98DA-F49F9B1B70AF.jpeg"/></a></figure><p id="485ba1ee-90be-4499-b512-5d282ef84db7" class="">
</p><h3 id="17cd7ebc-3914-4a53-be1d-1264ec379014" class="">OpenMP</h3><pre id="bc3cc56c-6aa1-41e3-b6c0-0458ff9782c1" class="code"><code>#pragma omp parallel
{
	/* blablabla */
}

#pragma omp parallel for
for(int i=0; i&lt;10; i++){
	/* assigns each i to different threads */
}

int sum = 0;
#prgama omp parallel reduction(+: sum){
	/* blablabla */
}

//Possible operators include: + / * / - / min / max / &amp; / &amp;&amp; / | / || / ^</code></pre><p id="3782b10c-15a5-4b64-90f2-49315a1d0ecd" class=""><strong>Private Variables</strong></p><pre id="13443606-2014-449c-9354-346d64dee3e9" class="code"><code>#pragma omp parallel private (var1)
{
	/* blablabla */
}</code></pre><p id="d00f6264-1846-4805-a890-fa754b546f37" class=""><strong>Methods</strong></p><pre id="b0683425-20e0-4714-afa2-5b763f273dd2" class="code"><code>omp_set_num_threads(x);
num_th = omp_get_num_threads();
th_id = omp_get_thread_num();
double omp_get_wtime(void);</code></pre><h3 id="e3e136d9-c662-46fc-8406-503de39a0449" class="">Request-Level Parallelism</h3><ul id="13f0285d-acd3-44ba-b9de-8cfb4bc5ad2b" class="bulleted-list"><li style="list-style-type:disc">Hundreds of thousands of requests per second</li></ul><ul id="6a1d759b-0ee5-40cb-bc50-e9ca3646f41a" class="bulleted-list"><li style="list-style-type:disc">Computation partitioned across different requests</li></ul><ul id="ccf70090-498f-49b1-a4a1-18641677cc61" class="bulleted-list"><li style="list-style-type:disc">&quot;Load Balancing&quot; on DNS and also request level</li></ul><ul id="3be8639e-244a-4fd1-84f5-d8569db99aab" class="bulleted-list"><li style="list-style-type:disc">Redundant copies of data<ul id="6ce3f273-83bf-4ab1-99dc-6c2b4c6f8494" class="bulleted-list"><li style="list-style-type:circle">To break up hot spots</li></ul><ul id="0d72586b-7321-4b69-8390-503833605333" class="bulleted-list"><li style="list-style-type:circle">Makes the system more tolerant of failures</li></ul></li></ul><p id="895dcf5f-f771-4d96-9df0-dee4a523c95d" class="">
</p><h2 id="715ab968-3892-4905-a456-93c77a487a82" class="">Common IO Devices</h2><h3 id="691e6537-2e8d-42f2-a6fd-c79878ff2dec" class="">Disk</h3><p id="b41b6640-f1e2-4e02-bbc8-1162105e20a1" class="">Non-volatile storage that is cheap, large, slow</p><div id="5c901509-2b04-4b19-b95a-9470e2aa5e6f" class="column-list"><div id="f0f9ec13-cb30-4598-b2b4-505c70b7a10e" style="width:50%" class="column"><p id="23aff934-2413-46e8-b0b1-f6231f8316e0" class="">Two Types:</p><ol type="1" id="d7581b1e-d917-49bc-8db8-2f2e1d135abd" class="numbered-list" start="1"><li>Hard Disk Drives (HDD) 硬盘 - faster, more dense, non-removable</li></ol><ol type="1" id="e3cf8d3c-d296-4b60-a16f-abfd1602de9d" class="numbered-list" start="2"><li>Floppy Disks 软盘 - slower,less dense, removable (replaced by USB &quot;flash drive&quot;)</li></ol></div><div id="021f724a-81d7-4e31-9904-1d0e4e5ba1c1" style="width:50%" class="column"><figure id="fd1539de-942d-477d-b723-e4df195ddbf9" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3CFB4297-B447-4A99-A25E-C057057D6F59.jpeg"><img style="width:1789px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3CFB4297-B447-4A99-A25E-C057057D6F59.jpeg"/></a></figure></div></div><p id="b5672e0b-37dc-4e44-b934-b00d162d19e2" class="">
</p><div id="6b207e3e-5811-4cb4-852e-b10707eca593" class="column-list"><div id="dfe42028-318f-4e01-a85f-32c04a1d4792" style="width:68.75%" class="column"><figure id="527f1a4e-04bc-4212-9be7-40e0754a57cd" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A73C22A3-625C-4073-9A38-0688771D2F1A.jpeg"><img style="width:1945px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A73C22A3-625C-4073-9A38-0688771D2F1A.jpeg"/></a></figure></div><div id="88d81789-14aa-4288-8bae-b24fe697a509" style="width:31.250000000000007%" class="column"><p id="77e2599b-6a8e-4f55-b18b-06071e49fa60" class="">Disk Device Terminology</p><ol type="1" id="27ef1a1d-c0f6-4f73-9518-e9810b54414a" class="numbered-list" start="1"><li>several plattes, with information recorded magnetically on both surfaces</li></ol><ol type="1" id="4dc9eb6c-cf05-45bc-bc02-2afb667020dd" class="numbered-list" start="2"><li>Bits recorded in tracks, which in turn divided into sectors (e.g. every 512B can be a sector)</li></ol><ol type="1" id="b3201c19-550e-42d6-b728-9a2807059375" class="numbered-list" start="3"><li>Actuator moves head over track ⇒ seek, wait for sector rotate under head, then read or write</li></ol></div></div><p id="ffc113dc-c557-4e69-83ec-8f3f939de316" class="">The closer the head to the disk, the smaller the &quot;spot size&quot; and thus the dense the recording</p><p id="054f2286-824f-429e-bb95-1308637044ba" class=""><strong>Spot size</strong></p><ol type="1" id="7b315794-0dfa-4461-9440-6f7e5b801685" class="numbered-list" start="1"><li>Measured in <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>i</mi><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Gbit/in^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">G</span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span><span class="mord">/</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></li></ol><ol type="1" id="68899a73-7175-4c1f-bd43-d9e10672a0f6" class="numbered-list" start="2"><li>~900 <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>i</mi><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Gbit/in^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">G</span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span><span class="mord">/</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> is state of the art</li></ol><p id="6c07d5cc-3fef-491d-9292-ae59aad9b104" class="">Disks are sealed to keep the dust out so heads can fly at around 3-20nm above the surface of the disk, 99.999% of head/arm weight is supported by the air bearing force(air cussion) between the disk and the head</p><p id="541d9bf2-84fc-4cf8-bd94-4680cb63c020" class=""><strong>Disk Access Time = Seek Time + Rotation Time + Transfer Time + Controller Overhead</strong></p><ol type="1" id="86af8fc7-7bec-4d40-b788-cdc0ebdc5676" class="numbered-list" start="1"><li>Seek Time = time to position the head assembly at the proper cylinder<ol type="a" id="96c38284-c03a-4891-8c95-0412c6b0a137" class="numbered-list" start="1"><li>Average # of tracks to move arm = Number of tracks / 3 ⇒ Seek time = # of tracks moved * time to move across one track</li></ol></li></ol><ol type="1" id="4f4f4f1e-50e1-4956-9803-9710d29bc89b" class="numbered-list" start="2"><li>Rotation time = time for the disk to the point where the first sectors of the block to access reach the head<ol type="a" id="f17ec711-e28b-4a3d-a0c7-2d800b92d05d" class="numbered-list" start="1"><li>Use average distance of sector from head = 1/2 time of a rotation</li></ol></li></ol><ol type="1" id="2a3d7c67-4332-4923-bd32-c26ad58c4c58" class="numbered-list" start="3"><li>Transfer time = time taken by the sectors of the block and any gaps between them to rotate past the head</li></ol><p id="b60fd760-9a76-4820-9012-9cc116e4c93c" class=""><span style="border-bottom:0.05em solid">Many disks have on-disk caches, which are completely hidden from the outside world, so estimates are different in practice.</span></p><p id="5ccd3076-090f-435a-a07f-6924ce4071eb" class="">
</p><h3 id="d78971b6-92fe-4fbb-9637-a1a2eaa48372" class="">Solid State Drive (SSD) / Flash Memory</h3><p id="5fa60ec7-631c-4fe0-933c-ded2f464d11e" class="">NMOS transistor with an additional conductor between gate and source/drain which traps electrons.</p><p id="060433db-e6ed-40e2-9fda-99efb6557304" class="">Memory cells can only withstannd a limited number of program-erase cycles. Controllers use a techinque called <strong>wear leveling to distributes writes as evenly as possible</strong> across all the flash blocks.</p><p id="5e1c712d-b638-473a-8ee7-1a458535ef5a" class="">Band with is similar to spinning disk</p><p id="6266f8d8-be9d-4c4a-b513-2feb4fe4c1a5" class="">But there&#x27;s <strong>no seek time</strong> so no additional lattency for random access vs. sequential acess of a block</p><h2 id="9d0b0079-afa9-4309-ad0e-a1ff9e58c8af" class="">Networking</h2><div id="bc1bf342-e039-434f-b835-feeea7765d9e" class="column-list"><div id="be561538-60e8-4573-9ba3-40844d562660" style="width:18.75%" class="column"><figure id="b5494f2a-b9f6-4f38-bf1f-4c956b4bd6a1" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/6D56E2BE-121D-4E44-B058-231F6891977C.jpeg"><img style="width:444px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/6D56E2BE-121D-4E44-B058-231F6891977C.jpeg"/></a></figure></div><div id="b2172901-3d20-463c-bb53-aa9637db7317" style="width:81.25%" class="column"><p id="ebbc4ec5-9ed1-4e21-8a3d-f4f5e7f43907" class=""><strong>OSI 7 Layer Network Model</strong></p><p id="077c4e37-d1a7-4008-b2bd-7c866c276cad" class="">Political - You shall not encrypt...</p><p id="628ee2a9-cc2a-4abf-b82e-cb9777868bd5" class="">Application: TLS + HTTP...</p><p id="1d2183a8-69d0-4f44-a366-f6962a5b7325" class="">Transport: TCP/UDP</p><p id="c47e08ae-9cdb-48a9-9412-f7b95a54068c" class="">Network: IPv4 / IPv6</p><p id="908b99c9-505d-4606-9fe8-bb8fe2fc0323" class="">Data Link: Ethernet</p></div></div><figure id="d93293d3-3ae7-4c89-807f-4afd92d43fe8" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A8DB6623-E03B-4758-9334-1830E0B4B294.jpeg"><img style="width:1665px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A8DB6623-E03B-4758-9334-1830E0B4B294.jpeg"/></a></figure><p id="e537b85c-4fc5-4dd6-9d53-c43039038300" class="">
</p><h1 id="f65dda14-5685-41dc-a2a6-bced30c6942b" class="">Considerations in building systems</h1><h2 id="a2aad762-5ee0-445c-9130-991be4dc7aa4" class="">Dependability</h2><h3 id="80233942-6459-4b75-ac1a-20a63a43d72d" class="">Types of Faults in Digital Designs</h3><ol type="1" id="4f5a17a8-536c-4233-bcd9-91e67d5b1c59" class="numbered-list" start="1"><li>Design Bugs (function, timing, power draw)<ol type="a" id="1605d437-b8f5-428c-8e8b-65c2f5616298" class="numbered-list" start="1"><li>Detected and corrected at design time through testing and verification</li></ol></li></ol><ol type="1" id="646a393a-5871-462a-a286-fbc4d427511e" class="numbered-list" start="2"><li>Manufacturing Defects (Violation of design rules, inpurities in processing, statistical variations)<ol type="a" id="c4c2c45d-e324-49af-88a8-fe5c6aef1b53" class="numbered-list" start="1"><li>Post production testing for sorting</li></ol><ol type="a" id="c5ea6e71-524d-4aff-8625-c77d22b725ef" class="numbered-list" start="2"><li>spare on-chip resources for repair</li></ol><ol type="a" id="70f97818-b186-436a-931a-034a6273a911" class="numbered-list" start="3"><li>Dealing with this in ICs:<ol type="i" id="60a81a53-9b4a-4f5e-91e7-1c578c6a74cb" class="numbered-list" start="1"><li>Designers provide &quot;test vectors&quot;<ol type="1" id="f2b51174-66bd-426c-bb72-d672284c1439" class="numbered-list" start="1"><li>Tools help with ATPG(Automatic Test Pattern Generation)</li></ol></li></ol><ol type="i" id="4c5661f4-c9f2-47c1-8b7d-90db28b725fe" class="numbered-list" start="2"><li>Special on-chip circuits help speed the testing proess<ol type="1" id="3d6f7c43-d0eb-478f-9928-93874ad1f91b" class="numbered-list" start="1"><li>BIST (built in self test), Scan-chains</li></ol></li></ol></li></ol></li></ol><ol type="1" id="3d9bd61e-c569-4cfd-a881-946ae83f35bc" class="numbered-list" start="3"><li>Runtime Failures (physical effects and environmental condtions)<ol type="a" id="ff5e22d5-5171-4023-ad68-a3e840aab280" class="numbered-list" start="1"><li>&quot;Hard Faults&quot;: aging</li></ol><ol type="a" id="edfd4337-a1c6-4dd1-a653-f584970da4dc" class="numbered-list" start="2"><li>&quot;Soft(transient Faults&quot;: electro-magnetic interference, cosmic particles</li></ol><ol type="a" id="2ee5600d-145d-4d9d-82a8-5040bc2d36df" class="numbered-list" start="3"><li>Dealt with:<ol type="i" id="f7e9f854-eba9-4384-8c42-12576bc8fb42" class="numbered-list" start="1"><li>Redundancy</li></ol><ol type="i" id="08cc2952-aa52-4b13-8bcb-2040351290a1" class="numbered-list" start="2"><li>Measures of dependability</li></ol><ol type="i" id="5cdd4bbb-83bd-4a6f-be0d-26541d38f837" class="numbered-list" start="3"><li>Codes for Error Detection/Correction</li></ol><ol type="i" id="6f4eb578-2164-4383-9eb5-042297e0c0ab" class="numbered-list" start="4"><li>Protecting Disk-Drives Against Errors</li></ol><p id="37d08215-7cb3-407f-94b9-fe2e6321b9f5" class="">
</p></li></ol></li></ol><p id="e4420e2e-67c1-4d48-a79c-9dcfee4ae871" class=""><strong>Dependability(可靠性) Via Redundancy</strong></p><ol type="1" id="063216f1-7455-4ab6-b0f6-50852f4ea962" class="numbered-list" start="1"><li>Spatial Redundancy<ol type="a" id="86d4ae88-262a-4fc3-b7c1-879b4cf075ad" class="numbered-list" start="1"><li>Replicated data or extra information / hardware to handle hard and soft failures</li></ol></li></ol><ol type="1" id="baf1b309-da4a-4ef8-a7e6-9b6d4a508ab0" class="numbered-list" start="2"><li>Temporal Redundancy<ol type="a" id="5add466d-2b13-49a1-81d9-415ff64dd4b3" class="numbered-list" start="1"><li>Redundancy in time(retry) to handle soft failures</li></ol></li></ol><p id="21a0426d-0637-4f84-9d90-e307472d66a0" class="">
</p><p id="ab26afbb-a201-4990-853d-c839741b4787" class="">Dependability Measures</p><p id="85a35134-2faa-4719-8ab6-f1cce9748de7" class="">Reliability: Mean Time To Failure (MTTF)</p><p id="2f0f11bf-6f03-4d37-b16c-e113a50e6517" class="">Service Interruption: Mean Time To Repair (MTTR)</p><p id="d1dede4b-b178-4561-9b93-5d9e91629417" class="">Mean Time Between Failures (MTBF) = MTTF + MTTR</p><p id="86707675-1891-4277-a869-37d08009f898" class="">Availability(可用性) = <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>T</mi><mi>T</mi><mi>F</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>M</mi><mi>T</mi><mi>T</mi><mi>F</mi><mo>+</mo><mi>M</mi><mi>T</mi><mi>T</mi><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">MTTF / (MTTF+MTTR)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">MTTF</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">MTTF</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">MTTR</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span></p><p id="04b08d2d-beb3-465c-ad2c-a67b4533d6ab" class="">Improving Availability</p><ol type="1" id="922ca821-439d-4277-820f-0985b6414dbb" class="numbered-list" start="1"><li>Increase MTTF: More reliable hardware/software + Fault Tolerance</li></ol><ol type="1" id="915612ed-be71-4143-9912-da52c992c4d4" class="numbered-list" start="2"><li>Reduce MTTR: improved tools and processes for diagnosis and repair</li></ol><p id="5f6614f7-261d-41a6-b16f-962823ded5b2" class="">Annualized Failure Rate (AFR) = Average Number Of Failures Per Year</p><figure id="05556705-dc2a-4267-84a6-89c020a25ea5" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/85CDD395-9F96-4F69-96BE-05C2BA2DB0A4.jpeg"><img style="width:4999px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/85CDD395-9F96-4F69-96BE-05C2BA2DB0A4.jpeg"/></a></figure><p id="73f273f5-b1be-4c03-9655-4d342d781b2c" class="">
</p><p id="178556c7-c4e1-4cb5-9e46-b254567d2a81" class=""><strong>Dependability Design Principle</strong></p><p id="f0807601-509a-4f52-9282-056570de5cbf" class="">No single points of failure</p><p id="87faabd9-a8c0-4711-a9da-aaaa173a9b51" class="">It follows barrel effect ⇒ Dependability of the entire system is limited by the part that has lowest dependability</p><p id="ee371880-9aee-447f-94f2-14d6f835bab4" class="">
</p><h2 id="f926096c-1d46-42bb-9691-70de5fbf74c3" class="">Error Correction/Detection Codes(ECC / EDC)</h2><h3 id="d411b49a-c143-451c-9d2b-c7c307528e47" class="">Error Detection Coding - Parity Bit</h3><p id="706599c5-0488-4c4e-b60c-6f735223805e" class="">Each data value is tagged with an extra bit to force the stored word to have even parity (even number of &quot;1&quot;s)</p><blockquote id="41bad716-129a-43ba-8719-75cc7c6b6ff0" class="">Of course can also use odd parity bit to protect against error</blockquote><p id="815f8cf6-a1d4-42f6-a3d9-1550ed2749e3" class="">
</p><h3 id="a333218b-d3c6-4d21-8542-2c026801e67e" class="">Hamming ECC</h3><p id="a1aac75a-74aa-4926-8f57-4e39562dd7fc" class="">Hamming Distance = # of bit positions where words differ</p><p id="711b0df9-f49c-4a62-8587-abf3804fa976" class="">Of course, you will see that 3b1b has a much better explanation than I do...</p><figure id="7fe512d3-07d1-40ff-9884-a6e36c840840"><a href="https://youtu.be/X8jsijhllIA" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">How to send a self-correcting message (Hamming codes)</div><div class="bookmark-description">A discovery-oriented introduction to error correction codes.Part 2: https://youtu.be/b3NxrZOu_CEBen Eater:&#x27;s take: https://youtu.be/h0jloehRKasHelp fund futu...</div></div><div class="bookmark-href"><img src="https://www.youtube.com/s/desktop/362fb125/img/favicon.ico" class="icon bookmark-icon"/>https://youtu.be/X8jsijhllIA</div></div><img src="https://i.ytimg.com/vi/X8jsijhllIA/hqdefault.jpg" class="bookmark-image"/></a></figure><figure id="30687f97-e8dc-46f2-8f7c-2ebed1159b0f"><a href="https://youtu.be/b3NxrZOu_CE" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Hamming codes part 2, the elegance of it all</div><div class="bookmark-description">Part 1: https://youtu.be/X8jsijhllIAWatch Ben Eater&#x27;s video: https://youtu.be/h0jloehRKasHelp fund future projects: https://www.patreon.com/3blue1brownAn equ...</div></div><div class="bookmark-href"><img src="https://www.youtube.com/s/desktop/362fb125/img/favicon.ico" class="icon bookmark-icon"/>https://youtu.be/b3NxrZOu_CE</div></div><img src="https://i.ytimg.com/vi/b3NxrZOu_CE/hqdefault.jpg" class="bookmark-image"/></a></figure><p id="232cf740-9f05-45b9-b047-1ab8de3c8876" class="">
</p><h2 id="91aa5d53-fc69-4a1b-bb2f-74123fea4c2a" class="">RAID ⇒ Redundant Arrays of <del>Inexpensive</del> Disks</h2><figure id="01609e1f-9c89-4a95-8f56-57b6f2814455" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/6A2ACA75-7CF5-40FE-B9CD-707F26B55769.jpeg"><img style="width:4999px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/6A2ACA75-7CF5-40FE-B9CD-707F26B55769.jpeg"/></a></figure><p id="5edae0d6-43c3-4987-9fb5-157e1583a1fd" class="">But reliability...</p><ul id="f42b557c-45d2-4ea5-8e28-eed176aa5501" class="bulleted-list"><li style="list-style-type:disc">If 1 disk as MTTF of 50k hours<ul id="2662fd2c-2263-4165-8831-2d4b0bb4aa96" class="bulleted-list"><li style="list-style-type:circle">70 disk will have a MTTF of ~700 hours(<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>50</mn><mo separator="true">,</mo><mn>000</mn></mrow><mn>700</mn></mfrac><mo>=</mo><mn>714</mn></mrow><annotation encoding="application/x-tex">{50,000 \over 700} = 714</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.242216em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.897216em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">700</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">50</span><span class="mpunct mtight">,</span><span class="mord mtight">000</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">714</span></span></span></span></span><span>﻿</span></span>), assuming failures are independent</li></ul><ul id="7d664667-959d-4c1a-9a6e-d02ac4beac71" class="bulleted-list"><li style="list-style-type:circle">This is because....Think about MTTF being the time it take for a dice to roll to 6. then the probability of the first disk failing for 70 disks will be much smaller for one disk to fail</li></ul></li></ul><ul id="500053e5-5a70-46f7-ba26-e424550d1f14" class="bulleted-list"><li style="list-style-type:disc">But we know when failures occur because disks use a lot of CRC coding</li></ul><p id="94bf5962-03f4-4cec-bcf5-5bc03af85123" class="">
</p><p id="89aa8136-01b6-408c-a032-2ebce8834553" class="">So we introduce RAID!</p><ol type="1" id="1e0f2193-bf24-43a7-8394-34be9ceea264" class="numbered-list" start="1"><li>Files are &quot;striped&quot; across multiple disks</li></ol><ol type="1" id="03d95263-2f22-4dc6-a286-c71872220a05" class="numbered-list" start="2"><li>Redundancy yields high data availability</li></ol><ol type="1" id="96cfc2de-0307-42a1-8fb3-feb0c40822c3" class="numbered-list" start="3"><li>Disks will still fill<ol type="a" id="7be21f6a-7082-40a3-ad05-0735ea24c524" class="numbered-list" start="1"><li>But we can reconstruct contents from data redundantly stored in the array</li></ol></li></ol><ol type="1" id="b85dce27-191f-4b4c-bcf1-20d88077c19b" class="numbered-list" start="4"><li>6 Raid Levels, 0, 1, 5, 6 most common today</li></ol><p id="307cfab3-b099-488d-b8d1-81650da39d80" class="">
</p><p id="ffd7678f-f1c3-4789-aabc-919e4c49dbef" class="">Raid 0: Striping</p><ul id="bb34b4bb-a9a4-44a8-879b-438b4af39e79" class="bulleted-list"><li style="list-style-type:disc">&quot;Split this block of storage in half, the first half to the first disk, the second to the second disk&quot;</li></ul><ul id="7c4a5f48-1157-42ca-9bd9-2078b8163a24" class="bulleted-list"><li style="list-style-type:disc">Not actually RAID (since no redundancy)</li></ul><ul id="595c748a-fbdf-4e5f-9a04-c8858ad35529" class="bulleted-list"><li style="list-style-type:disc">Improves bandwidth linearly</li></ul><ul id="4951b643-5cda-4f3f-ba3d-8593688c5e13" class="bulleted-list"><li style="list-style-type:disc">Doesn&#x27;t really help latency</li></ul><ul id="b21f098f-523a-4596-987a-0f8e67da9695" class="bulleted-list"><li style="list-style-type:disc">And <strong>FAILURES WILL HAPPEN</strong></li></ul><p id="d2a7f0a1-5950-4676-975d-86312780dcd2" class="">
</p><p id="b0fc3e5d-bbf4-4e86-94bf-c2331a5de8e0" class="">Raid 1: Disk Mirroring / Shadowing (online sparing)</p><ul id="f1dfa58f-b192-416c-ac70-18313e4f72e0" class="bulleted-list"><li style="list-style-type:disc">Each disk fully duplicated onto its &quot;mirror&quot;<ul id="31b77647-d5e2-4db9-9dcb-8c3977ae9809" class="bulleted-list"><li style="list-style-type:circle">Very high availability achieved</li></ul></li></ul><ul id="bea470fd-5c8d-4047-b8be-94af9e1ee2d0" class="bulleted-list"><li style="list-style-type:disc">Writes go to disk and mirror</li></ul><ul id="e2735eb6-5804-4875-9fc2-259890b280e9" class="bulleted-list"><li style="list-style-type:disc">Reads from original disk, unless failure</li></ul><p id="9674a005-d80f-407a-9a1b-49503790461d" class="">
</p><figure id="06478144-2052-4351-a81f-bbb6ee78afa1" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/43BA5EBE-6B40-4F78-B2FE-3DF614D26CA8.jpeg"><img style="width:4000px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/43BA5EBE-6B40-4F78-B2FE-3DF614D26CA8.jpeg"/></a><figcaption>RAID 2 Illustration</figcaption></figure><p id="de12b78a-7a01-4c8f-aff8-0ad0fcdb4002" class="">Raid 2: Hamming Code for Error Correction</p><ul id="3694e877-e3bd-4271-a2cc-4f568fa273a3" class="bulleted-list"><li style="list-style-type:disc">Bits of a data block are distributed across all disks</li></ul><ul id="f36b9ed5-483b-4a2c-af48-65b660ddc8dd" class="bulleted-list"><li style="list-style-type:disc">Check disks store parity groups of Hamming code</li></ul><ul id="03adeec2-6803-4f94-a2b9-0a2ec4ab92c0" class="bulleted-list"><li style="list-style-type:disc">All disks involved in read/write operations</li></ul><p id="98a87d8a-ee33-4b8f-b363-a7d29292c404" class="">
</p><div id="0bbd1cd0-b1b7-4ff6-a75c-80ef4649bdc2" class="column-list"><div id="9ed06f3a-684f-4475-8329-b6cbec3db24a" style="width:37.5%" class="column"><p id="ba0e9001-e291-4c24-8b0c-293c6491c7cf" class="">Raid 3: Single Parity Disk (bitwise)</p><ul id="4959a212-2ed5-460b-abeb-289841d6e86f" class="bulleted-list"><li style="list-style-type:disc">Disk drives themselves code data and detect failures</li></ul><ul id="2aeda006-d963-4f94-8c26-fb4b03c62329" class="bulleted-list"><li style="list-style-type:disc">Reconstruction of data can be done with single parity disk if we know which disk failed</li></ul><ul id="716061d6-60f9-4ff7-8d6f-52db1d07a5f6" class="bulleted-list"><li style="list-style-type:disc">Writes change data disk and P disk</li></ul></div><div id="7a8d921b-edda-4e64-9284-8729e6523a9b" style="width:62.5%" class="column"><figure id="03451da0-61b2-4ada-a5b6-6e07cab941f7" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/685C3F34-E95B-49D4-9666-10B4295C9D6D.jpeg"><img style="width:2159px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/685C3F34-E95B-49D4-9666-10B4295C9D6D.jpeg"/></a></figure></div></div><p id="16857eaf-06c8-4984-a4c9-869c17b49bde" class="">
</p><div id="3e3d6730-df26-4f0a-83d8-1ab641329dee" class="column-list"><div id="bfbb66c7-cabf-4055-af25-6e2e56119d4f" style="width:50%" class="column"><p id="d10955a7-4fbf-4bee-99f3-86addc822225" class="">RAID 4: High I/O Rate Parity (blockwise)</p><ul id="966d3de3-66e0-4125-bb6e-17e164a60db5" class="bulleted-list"><li style="list-style-type:disc">Interleave data at the setor level (data block) rather than bit level<ul id="cb3e62d5-8f4e-4e0f-8c44-312a5ecc9089" class="bulleted-list"><li style="list-style-type:circle">Permits more parallelism</li></ul><ul id="94833afd-25e7-41c4-87a5-058ae860d1a5" class="bulleted-list"><li style="list-style-type:circle">Independent small reads, parallel large reads</li></ul></li></ul><ul id="7f2877d9-562c-46e7-ac07-2abe168c9d98" class="bulleted-list"><li style="list-style-type:disc">Reconstruction of data can be done with single parity disk</li></ul><ul id="bb53001a-b61a-4e2e-900c-e1323aab45dc" class="bulleted-list"><li style="list-style-type:disc">Reading without fault involve only data disk</li></ul><ul id="873ca7b9-466d-4436-869c-06962d2242e9" class="bulleted-list"><li style="list-style-type:disc">Writing involves data + parity disk</li></ul></div><div id="9b68ad83-9175-4bd5-ad5b-e9ad7b9cd929" style="width:50%" class="column"><figure id="f150d2fc-3bab-4e99-a027-d4978b75da1e" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/21FEC129-134B-46B9-BDA8-86B8FCC44979.jpeg"><img style="width:1303px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/21FEC129-134B-46B9-BDA8-86B8FCC44979.jpeg"/></a></figure></div></div><p id="172d124b-f122-477d-bea6-c71576039171" class="">
</p><div id="9b3f2801-d625-4b6f-9e59-17bdfd37bb15" class="column-list"><div id="3aacdffe-fca5-47f7-8286-7059e79d1935" style="width:50%" class="column"><p id="5f1cc619-6e23-4438-bf5b-4176a2fcdd3f" class="">RAID 5: High I/O Rate Interleaved Parity</p><ul id="58434e96-fbf4-429e-8588-cbb7430d7757" class="bulleted-list"><li style="list-style-type:disc">Independent writes possible because of interleaved parity</li></ul><ul id="a3f9578e-fe3f-42f9-8ae1-9df5d5099c98" class="bulleted-list"><li style="list-style-type:disc">No longer the gold standard<ul id="c35af4df-e825-42b3-a367-8bda9e0d832d" class="bulleted-list"><li style="list-style-type:circle">can experience 1 disk failure and contine operation</li></ul><ul id="d1d08258-daf6-46b1-b775-a3441eb7bb4e" class="bulleted-list"><li style="list-style-type:circle">But disk failures are not independent!</li></ul></li></ul></div><div id="c0c3e4c5-b47d-47fd-b537-4f72babd9fd8" style="width:50%" class="column"><figure id="a05cd0b8-00e0-4e54-ba6f-b36eac3c48f1" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/68778275-5C87-4D35-B4FD-0D792E5572F2.jpeg"><img style="width:1944px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/68778275-5C87-4D35-B4FD-0D792E5572F2.jpeg"/></a></figure></div></div><p id="d9251da1-ca79-4573-9cd3-fadf42e10378" class="">
</p><p id="b53cc57c-7aed-4998-80a8-c7d962f76410" class="">RAID 6: Add another parity block per stripe</p><ul id="c26cbe0a-a47f-44b3-9f5a-117f4ca3afcc" class="bulleted-list"><li style="list-style-type:disc">Now 2 blocks per stripe rather than 1</li></ul><ul id="93afad3e-f26b-40b6-aaf6-82b9ee8995a7" class="bulleted-list"><li style="list-style-type:disc">Sacrifice capacity for increased redundancy</li></ul><ul id="c7dbda17-8649-4b7b-8755-7dd38e19803b" class="bulleted-list"><li style="list-style-type:disc">Array can tolerate 2 disk failures and continue operating</li></ul><p id="7953ab11-97c4-43b1-b7d5-76e7343ed59f" class="">
</p><h1 id="5f30944a-a30b-4a3b-a7cc-846e7e3dc18f" class="">Warehouse Computing</h1><h2 id="d4be353a-9a81-49ad-9a72-15fb36dc50dd" class="">Measurements</h2><h3 id="abb35c75-6fdc-4c37-8981-b54675b81c3d" class="">Power Usage Effectiveness</h3><p id="fc4ec24a-f1fb-40f7-9e4e-f3802397aed8" class="">Energy Efficiency is the primary concern in the design of WSC(Warehouse-Scale Computing)</p><hr id="fd2e2b43-f906-4e74-b7f9-f11c4a2d7fe2"/><p id="b57d8d4d-60d0-479e-bfc1-70403e0e9e32" class="">Power Usage Effectiveness(PUE)</p><p id="d654fa8d-0fd6-4e66-87ef-3a133945646f" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>U</mi><mi>E</mi><mo>=</mo><mfrac><mrow><mi>P</mi><mi>o</mi><mi>w</mi><mi>e</mi><msub><mi>r</mi><mrow><mi>t</mi><mi>o</mi><mi>t</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>b</mi><mi>u</mi><mi>i</mi><mi>l</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow></msub></mrow><mrow><mi>P</mi><mi>o</mi><mi>w</mi><mi>e</mi><msub><mi>r</mi><mrow><mi>I</mi><mi>T</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>i</mi><mi>p</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">PUE = {Power_{total\_building} \over Power_{IT\_equipment}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.649496em;vertical-align:-0.600305em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.049191em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">e</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.356707142857143em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3647214285714286em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.57086em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">e</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3726571428571428em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.600305em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><span>﻿</span></span></p><h2 id="f5b82151-8f95-40db-a54f-dceb5b2003c4" class="">Cloud Services</h2><ul id="fa42d8c5-d6d0-4326-99a9-f9ae3a505e71" class="bulleted-list"><li style="list-style-type:disc">SaaS<ul id="de25a49f-3978-4abf-8505-481696cb767c" class="bulleted-list"><li style="list-style-type:circle">deliver apps over Internet, eliminating need to install/run on customer&#x27;s computers, simplifying maintenance and support</li></ul><ul id="26edc39d-a379-46b9-b34c-cdf0f0fd225b" class="bulleted-list"><li style="list-style-type:circle">Google Docs, Win Apps in the Cloud</li></ul></li></ul><ul id="14308d78-c73e-475b-8df7-8e7dc786549a" class="bulleted-list"><li style="list-style-type:disc">PaaS<ul id="92b94582-8069-4c7d-a4ff-9bf9bc7d6a89" class="bulleted-list"><li style="list-style-type:circle">Deliver computing &quot;stack&quot; as a service, using cloud infrastructure to implement apps</li></ul><ul id="27deea45-ef7b-4c08-89fe-922c522d18b9" class="bulleted-list"><li style="list-style-type:circle">Hadoop on EC2, Apache Spark on GCP</li></ul></li></ul><ul id="e3fe5488-06ae-40ba-ae07-b9c2a782403a" class="bulleted-list"><li style="list-style-type:disc">IaaS<ul id="9a26dcd5-b537-4214-a7e1-3ed4fcfb9a31" class="bulleted-list"><li style="list-style-type:circle">Rather than purchasing servers, software, data center space, clients buy resources as an outsourced service</li></ul><ul id="cdc77053-51e6-47a3-9826-10a3b47b5635" class="bulleted-list"><li style="list-style-type:circle">Amazon Elastic Compute Cloud, Google Compute Platform</li></ul></li></ul><p id="a7f15504-380b-43bc-bb02-6aca22b15650" class="">
</p><h2 id="9bedb796-74f0-4f26-9849-03cb52947c35" class="">MapReduce</h2><p id="e85f10a0-5566-4436-9139-7656e7b38aa8" class="">Specify the computation in terms of</p><ul id="896eac97-f907-4815-b4c7-880cdd188d7b" class="bulleted-list"><li style="list-style-type:disc">A map function</li></ul><ul id="fd611692-f2cc-4c92-892f-81f7b4b2fe3b" class="bulleted-list"><li style="list-style-type:disc">and a reduce function</li></ul><p id="d275fded-1537-4493-b189-6f3c4d49a6bb" class="">
</p><p id="859050d3-fc2e-4d39-be1f-bf1aa157904f" class=""><strong>Fine granularity tasks 细粒度任务</strong>: Many more map tasks than machines</p><p id="820e47b7-c7c4-464d-8837-abe0ffb59de3" class="">
</p><p id="9284f1d0-867d-4578-83b3-f5aeeab44da9" class="">MapReduce Process:</p><figure id="493007da-a970-447f-91d1-7a5c0b19c3c4" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/D20CC537-9201-4948-BF23-501C5E388125.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/D20CC537-9201-4948-BF23-501C5E388125.jpeg"/></a></figure><figure id="3d88e0f6-a048-461e-abbb-42da5f03abdd" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A4A2BC04-0664-4000-8C62-77ADC5DE0732.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/A4A2BC04-0664-4000-8C62-77ADC5DE0732.jpeg"/></a></figure><figure id="bf13dbbe-f957-42ab-a231-195e9c484af5" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/91589B60-E6FB-4DB2-B641-7C7CEFE1BA27.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/91589B60-E6FB-4DB2-B641-7C7CEFE1BA27.jpeg"/></a></figure><figure id="9ce0f195-7bd5-4a80-92a3-d3e36a48e24f" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/1F806BE4-E107-43A6-8363-9DD4D6ED3322.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/1F806BE4-E107-43A6-8363-9DD4D6ED3322.jpeg"/></a></figure><figure id="50d92aad-a16e-4976-aa36-29ce13aeeec9" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/661B2949-0F1A-42D7-AE92-495D2F828E9D.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/661B2949-0F1A-42D7-AE92-495D2F828E9D.jpeg"/></a></figure><figure id="ed67d07e-b528-42af-a0de-aec1efda2a01" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/0CA394EA-9234-4FCD-8A1B-9E67E8E6D59B.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/0CA394EA-9234-4FCD-8A1B-9E67E8E6D59B.jpeg"/></a></figure><figure id="7d984886-4c33-4c4d-8ab9-5558251135c9" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3F4AC803-E2A4-4A47-BDD4-EF46083C056D.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/3F4AC803-E2A4-4A47-BDD4-EF46083C056D.jpeg"/></a></figure><figure id="e1b787a7-2e80-4e26-a70d-754a80ee934a" class="image"><a href="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/12D2A0F2-CC90-42FF-8911-A5F9833BD7AC.jpeg"><img style="width:2904px" src="CS61C%20Review%20Doc%20e8b9b312e3074e158aec05ea1ef6f178/12D2A0F2-CC90-42FF-8911-A5F9833BD7AC.jpeg"/></a></figure></div></article></body></html>